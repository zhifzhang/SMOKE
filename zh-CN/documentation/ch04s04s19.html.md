::: {.navheader}
4.4.19. Model for CMAQ
:::

[Prev](ch04s04s18.html) 

4.4. How to use SMOKE

 [Next](ch04s04s20.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#sect_scripts_model_cmaq}4.4.19. Model for CMAQ {#model-for-cmaq .title}

</div>

</div>
:::

In this section, we attempt to give a basic outline of the
considerations for script reconfiguration needed for SMOKE output for
the CMAQ model. All models require **Smkmerge** to be configured for
outputting gridded data, with speciation, and with hourly emissions. The
following configurations are needed when modeling for CMAQ.

::: {.orderedlist}
1.  Make sure the chemical speciation is set for one of the CMAQ
    chemical mechanism.

    This check involves the `SPC`{.envar} setting, explained in
    [Section 4.4.10, "Use a different speciation mechanism or change
    speciation
    inputs"](ch04s04s10.html "4.4.10. Use a different speciation mechanism or change speciation inputs").

2.  Set the basic settings for CMAQ.

    ::: {.itemizedlist}
    -   Set `RUN_LAYPOINT`{.envar} to Y

    -   Set `REP_LAYER_MAX`{.envar} to the number of the layer you
        expect should be the maximum plume rise layer (the layer that
        includes 2000 meters).

    -   Set `MRG_TEMPORAL_YN`{.envar} to Y

    -   Set `MRG_SPCMAT_YN`{.envar} to Y

    -   Set `MRG_LAYERS_YN`{.envar} to Y

    -   Set `MRG_GRDOUT_YN`{.envar} to Y

    -   Set `SMK_ASCIIELEV_YN`{.envar} to N

    -   Set `SMK_EMLAYS`{.envar} to the number of layers you need for
        your emissions files (usually up to the layer that includes 2000
        meters, unless you are using explicit plume rise, in which case
        the layer that includes the maximum plume height of the
        precomputed plume top).
    :::

3.  Set the correct output units in the runs scripts.

    CMAQ expects output units of moles/s. For biogenic processing, this
    requires the **Smkmerge** program to be run to convert the moles/hr
    units output by **Tmpbio** or **Tmpbeis3** to moles/s.

    Set the `MRG_GRDOUT_UNIT`{.envar} setting in the run script to
    either moles/s (for CMAQ). For biogenics processing, make sure
    `RUN_SMKMERGE`{.envar} is set to Y.

4.  Configure approach for plume rise for standard point sources,
    including optional PinG sources for CMAQ.

    The point-source run script should have the following settings in
    each of the following situations.

    ::: {.orderedlist}
    a.  Calculate plume rise for all point sources.

        ::: {.itemizedlist}
        -   Set `RUN_ELEVPOINT`{.envar} to N

        -   Set `HOUR_PLUMEDATA_YN`{.envar} to N

        -   Set `SMK_SPECELEV_YN`{.envar} to N

        -   Set `EXPLICIT_PLUMES_YN`{.envar} to N

        -   Set `SMK_PING_METHOD`{.envar} to N

        -   Set `SMK_SPECELEV_YN`{.envar} to N
        :::

    b.  Select specific elevated sources for CMAQ and calculate plume
        rise only for those.

        Use the same settings as in part (a) above, except:

        ::: {.itemizedlist}
        -   Set `RUN_ELEVPOINT`{.envar} to Y (See [Section 4.4.14, "Use
            **Elevpoint** for selecting elevated and PinG
            sources"](ch04s04s14.html "4.4.14. Use Elevpoint for selecting elevated and PinG sources")
            for more information about running **Elevpoint** to select
            elevated sources)

        -   Set `SMK_ELEV_METHOD`{.envar} to 1

        -   Set `SMK_SPECELEV_YN`{.envar} to Y
        :::

    c.  Select PinG sources for CMAQ.

        Use the same settings in part (a) above, except:

        ::: {.itemizedlist}
        -   Set `RUN_ELEVPOINT`{.envar} to Y (See [Section 4.4.14, "Use
            **Elevpoint** for selecting elevated and PinG
            sources"](ch04s04s14.html "4.4.14. Use Elevpoint for selecting elevated and PinG sources")
            for more information about running **Elevpoint** to select
            PinG sources)

        -   Set `SMK_PING_METHOD`{.envar} to 1
        :::
    :::

5.  Configure approach for plume rise for explicit plume rise sources.

    Explicit plume rise sources (i.e., sources for which plume rise has
    been computed outside of SMOKE) require additional precomputed plume
    rise information, previously described for inventory data import in
    [Section 4.4.2.5, "Day-specific and hour-specific point and fire
    inventories"](ch04s04s02.html#sect_scripts_hour_day_invs "4.4.2.5. Day-specific and hour-specific point and fire inventories").
    In addition to these data for CMAQ modeling, the following settings
    must be made in the run scripts. These settings are in addition to
    the other configurations you need for the other point sources
    described above. [If the only point sources in your inventory are
    explicit plume rise sources, then use the settings described in
    steps 3 and 5a above.]{.remark}

    ::: {.itemizedlist}
    -   Set `HOUR_PLUMEDATA_YN`{.envar} to Y
    :::
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  --------------------------------------------------------------------------- -------------------- -----------------------------------
  [Prev](ch04s04s18.html)                                                      [Up](ch04s04.html)              [Next](ch04s04s20.html)
  4.4.18. In-line Plume Rise Calculation in CMAQ model (as of version 4.7)     [Home](index.html)     4.4.20. Model for UAM and CAM~X~
  --------------------------------------------------------------------------- -------------------- -----------------------------------
:::
