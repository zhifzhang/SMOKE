::: {.navheader}
5.3.11. **Metscan**
:::

[Prev](ch05s03s10.html) 

5.3.  SMOKE Utility Programs

 [Next](ch05s03s12.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#sect_utilities_metscan}5.3.11. **Metscan** {#metscan .title}

</div>

</div>
:::

::: {.toc}
[[5.3.11.1. Description](ch05s03s11.html#d0e20634)]{.section}

[[5.3.11.2. Processing Order](ch05s03s11.html#d0e20660)]{.section}

[[5.3.11.3. Files and Environment
Variables](ch05s03s11.html#d0e20679)]{.section}
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e20634}5.3.11.1. Description {#description .title}

</div>

</div>
:::

**Metscan** reads in a single (often annual) temperature I/O API
meteorology data file (created from either the `MET_CRO_2D`{.envar} or
`MET_CRO_3D`{.envar} files) and determines the first freeze date and
last freeze date of a year, by grid cell. It outputs a gridded file with
a daily (24-hour) time step that contains a single variable. For each
grid cell, that variable has a value of 0 (zero) when the date being
modeled indicates that the cell is experiencing winter conditions;
otherwise it has a value of 1, indicating summer conditions. The program
can be set to run in the Northern Hemisphere or in the Southern
Hemisphere (it will not work on global meteorology datasets). In the
Northern Hemisphere, the first freeze date in the fall marks the start
of winter, and the last freeze date in the spring marks the end of
winter; all other days are considered summer days. The seasons are
reversed in the Southern Hemisphere, and the program accommodates this
accordingly.

The BEIS3 model operates using the assumption of either winter or summer
emission factors. There are no spring or fall factors available, which
is why this program is limited to the choice of summer or winter. The
use of the freeze date to determine summer or winter emission factors is
based on EPA's recommendation.

The program reads in the name of the temperature variable as an option,
so that the ground temperature, 1.5-meter temperature, or 10-meter
temperature can be used from the `MET_CRO_2D`{.envar} file, or the
layer-1 temperature can be used from the `MET_CRO_3D`{.envar} file. See
the `TMPR_VAR`{.envar} option below for more information on the names of
the temperature variables that are acceptable.
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e20660}5.3.11.2. Processing Order {#processing-order .title}

</div>

</div>
:::

**Metscan** can optionally be used before **Tmpbeis3**, which does not
require the output from **Metscan** to run. **Metscan** is needed only
when users wish to have **Tmpbeis3** automatically switch between winter
and summer emission factors by grid cell. This approach is recommended
when processing time periods and modeling domains include temperatures
below 32 °F either for a substantial number of days relative to the
number of episode days or at critical dates in the episode.
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e20679}5.3.11.3. Files and Environment Variables {#files-and-environment-variables .title}

</div>

</div>
:::

::: {.toc}
[[5.3.11.3.1. Input Files](ch05s03s11.html#d0e20682)]{.section}

[[5.3.11.3.2. Input Environment
Variables](ch05s03s11.html#d0e20738)]{.section}

[[5.3.11.3.3. Output Files](ch05s03s11.html#d0e20772)]{.section}
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#d0e20682}5.3.11.3.1. Input Files {#input-files .title}

</div>

</div>
:::

::: {.informaltable}
+----------------------+----------------+-------------------------+
| File Name            | Format         | Description             |
+======================+================+=========================+
| `MET_CRO_3D`{.envar} | I/O API NetCDF | Meteorology file that   |
|                      |                | can be a 2-D or 3-D     |
|                      |                | file (though the        |
|                      |                | logical file name is    |
|                      |                | the same in both cases) |
|                      |                | and needs to include    |
|                      |                | all dates in the        |
|                      |                | modeling period. For    |
|                      |                | example, for an annual  |
|                      |                | SMOKE run this file     |
|                      |                | would need to have all  |
|                      |                | hours of the year. The  |
|                      |                | file can be created by  |
|                      |                | extracting one or more  |
|                      |                | temperature variables   |
|                      |                | (at a minimum, the one  |
|                      |                | you intend to use) out  |
|                      |                | of the                  |
|                      |                | `MET_CRO_2D`{.envar} or |
|                      |                | `MET_CRO_3D`{.envar}    |
|                      |                | files output by the     |
|                      |                | MCIP or MCPL programs   |
|                      |                | using the **m3xtract**  |
|                      |                | I/O API utility and     |
|                      |                | appending all days of   |
|                      |                | data into the same      |
|                      |                | file.                   |
|                      |                |                         |
|                      |                | The **m3xtract**        |
|                      |                | utility documentation   |
|                      |                | is provided with the    |
|                      |                | I/O API, but we provide |
|                      |                | some information here.  |
|                      |                | The utility expects     |
|                      |                | input logical file name |
|                      |                | `INFILE`{.envar} and    |
|                      |                | creates output logical  |
|                      |                | file name               |
|                      |                | `OUTFILE`{.envar}. It   |
|                      |                | prompts for the start   |
|                      |                | date, start time,       |
|                      |                | duration, and variables |
|                      |                | that you want to        |
|                      |                | extract from the        |
|                      |                | `INFILE`{.envar}. If    |
|                      |                | `OUTFILE`{.envar}       |
|                      |                | already exists,         |
|                      |                | **m3xtract** appends    |
|                      |                | additional data to the  |
|                      |                | file (assuming that the |
|                      |                | grid is the same and    |
|                      |                | the time period is      |
|                      |                | sequential).            |
+----------------------+----------------+-------------------------+
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#d0e20738}5.3.11.3.2. Input Environment Variables {#input-environment-variables .title}

</div>

</div>
:::

::: {.itemizedlist}
-   `TMPR_VAR`{.envar}: \[default: TA\]

    Sets the name of the temperature variable that will be read from the
    `MET_CRO_3D`{.envar} input file. Acceptable values for MCIP and MPCL
    outputs available at the time of this writing are TA (ambient
    layer-1 temperature from the `MET_CRO_3D`{.envar} file), TEMP10
    (10-meter temperature from the `MET_CRO_2D`{.envar} file), TGD
    (ground temperature), TGRND (ground temperature), and TEMP1P5
    (1.5-meter temperature). Current guidance from EPA suggests that a
    10- to 20-meter temperature is the best choice for the temperature
    input to BEIS3, to account for the fact that these models do not
    include a canopy model.

-   `N_S_HEMI`{.envar}: \[default: NORTH\]

    Sets the program to run for the Northern or Southern Hemisphere.
    Acceptable values for this setting are:

    ::: {.itemizedlist}
    -   NORTH: Northern Hemisphere. Program starts July 1 and scans data
        in reverse chronological order to find the last freeze date and
        in chronological order to find the first freeze date.

    -   SOUTH: Southern Hemisphere. Program starts January 1 and scans
        data in chronological order to find the first freeze date. It
        also starts December 31 and scans the data in reverse
        chronological order to find the last freeze date.
    :::
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#d0e20772}5.3.11.3.3. Output Files {#output-files .title}

</div>

</div>
:::

::: {.informaltable}
  File Name             Format           Description
  --------------------- ---------------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  `BIOSEASON`{.envar}   I/O API NetCDF   For each grid cell, contains 0 for winter dates and 1 for summer (nonwinter) dates. The file's duration will be as long as that of the input meteorology file you provide.
  `LOGFILE`{.envar}     ASCII            Log generated from executing **Metscan**
:::
:::
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  -------------------------- -------------------- --------------------------
  [Prev](ch05s03s10.html)     [Up](ch05s03.html)     [Next](ch05s03s12.html)
  5.3.10. **Metcombine**      [Home](index.html)        5.3.12. **Pktreduc**
  -------------------------- -------------------- --------------------------
:::
