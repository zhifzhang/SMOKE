::: {.navheader}
8.9.3. Point
:::

[Prev](ch08s09s02.html) 

8.9. Source-Specific files

 [Next](ch08s10.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#sect_input_source_point}8.9.3. Point {#point .title}

</div>

</div>
:::

::: {.toc}
[[8.9.3.1. `PELVCONFIG`{.envar}: Elevated source selection
file](ch08s09s03.html#sect_input_pelvconfig)]{.section}

[[8.9.3.2. `PSTK`{.envar}: Point source stack replacement parameters
file](ch08s09s03.html#sect_input_pstk)]{.section}

[[8.9.3.3. `PTMPLIST`{.envar}: List of hourly point source emissions
files](ch08s09s03.html#sect_input_ptmplist)]{.section}
:::

The directories where the point-specific input files should be stored
are listed in [Table 8.10, "Point-Specific Input File
Locations"](ch08.html#tbl_input_point_files "Table 8.10. Point-Specific Input File Locations").
The table also lists the programs that use each input file.

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#sect_input_pelvconfig}8.9.3.1. `PELVCONFIG`{.envar}: Elevated source selection file {#pelvconfig-elevated-source-selection-file .title}

</div>

</div>
:::

::: {.toc}
[[8.9.3.1.1. Using comments](ch08s09s03.html#d0e50029)]{.section}

[[8.9.3.1.2. Source category
selection](ch08s09s03.html#d0e50034)]{.section}

[[8.9.3.1.3. Source
grouping](ch08s09s03.html#sect_input_pelvconfig_group)]{.section}

[[8.9.3.1.4. Plume-in-grid source
selection](ch08s09s03.html#sect_input_pelvconfig_ping)]{.section}

[[8.9.3.1.5. Elevated source
selection](ch08s09s03.html#d0e50252)]{.section}
:::

The `PELVCONFIG`{.envar} is optionally used by the **Elevpoint**
program. It permits users to provide SMOKE criteria for grouping stacks
and for selecting elevated and PinG point sources. "[Stack
groups]{.quote}" are groups of stacks from the same facility that are
treated by SMOKE and the AQM as a single stack when computing plume rise
and/or processing the stack as a PinG source. They have the effect of
reducing the number of elevated and PinG stacks which makes for faster
processing, particularly in the case of PinG sources in the AQM. Users
can specify stack groups regardless of whether elevated or PinG sources
are also being specified.

All emissions in a stack group are summed for the purposes of comparing
against the elevated source criteria and PinG source criteria. In short,
the grouped sources are treated as a single source for all SMOKE
features regarding elevated source selection and special outputs. The
grouped sources can still have different temporal profiles and chemical
speciation profiles. For more information on how the emissions are
computed for source selection, see [Section 6.3,
"**Elevpoint**"](ch06s03.html "6.3. Elevpoint").

The `PELVCONFIG`{.envar} file has four sections: (1) source category
selection, (2) source grouping, (3) PinG source selection, and (4)
elevated source selection. Sections 2, 3, and 4 are optional, but
**Elevpoint** will not run if all three sections are missing, because in
that case the file would be instructing it to do nothing. The sections
need not appear in any particular order, but each section is permitted
only once. Comments may also be used in the file. The following
subsections explain these major input features.

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#d0e50029}8.9.3.1.1. Using comments {#using-comments .title}

</div>

</div>
:::

Comments can be put in the file using a pound sign (\#) in the first
column of a line or a double pound sign (\#\#) anywhere else in a line.
For example, the double pound can appear after packet labels or
instructions in the file.
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#d0e50034}8.9.3.1.2. Source category selection {#source-category-selection .title}

</div>

</div>
:::

This section is used to tell **Elevpoint** which source category to
process. Since **Elevpoint** is designed only for point sources, this is
very simple. This section needs to appear as follows:

SMK\_SOURCE P
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#sect_input_pelvconfig_group}8.9.3.1.3. Source grouping {#source-grouping .title}

</div>

</div>
:::

::: {.toc}
[[8.9.3.1.3.1. /SPECIFY ELEV GROUPS/
variables](ch08s09s03.html#sect_input_pelvconfig_group_variables)]{.section}

[[8.9.3.1.3.2. /SPECIFIC ELEV GROUPS/ grouping
criteria](ch08s09s03.html#sect_input_pelvconfig_group_criteria)]{.section}
:::

The /SPECIFY ELEV GROUPS/ packet is used for defining source groups
based on source criteria. The packet contains the following entries:

::: {.itemizedlist}
-   /SPECIFY ELEV GROUPS/

    Must appear to start the packet. Only one packet of this type is
    permitted.

-   \<Source grouping criteria, explained next\>

-   /END/

    Must appear to end the packet.
:::

The [*source grouping criteria*]{.emphasis} can be as many lines as you
want. Each line contains at least three parts: (1) variable (explained
in [Section 8.9.3.1.3.1, "/SPECIFY ELEV GROUPS/
variables"](ch08s09s03.html#sect_input_pelvconfig_group_variables "8.9.3.1.3.1. /SPECIFY ELEV GROUPS/ variables")),
(2) type of criterion (explained in [Section 8.9.3.1.3.2, "/SPECIFIC
ELEV GROUPS/ grouping
criteria"](ch08s09s03.html#sect_input_pelvconfig_group_criteria "8.9.3.1.3.2. /SPECIFIC ELEV GROUPS/ grouping criteria")),
and (3) value for criterion, in the following structure:

\<variable\> \<type of criterion\> \<value for criterion\>

For example, the following source grouping criterion groups all
inventory sources at the same facility that have stack heights within ±2
meters of weighted average stack height:

``` {.programlisting}
HT  +/-  2.0
```

The fact that sources are grouped by facility is implicit to the
**Elevpoint** program, since we assumed when creating **Elevpoint** that
grouping at a coarser level of detail was not desirable. The packet
supports boolean OR and AND conditions. Each separate line of the packet
is an OR condition. The AND conditions must appear on a single line. Any
number of lines are permitted in this packet, as are any number of AND
conditions or AND/OR combinations. However, each line has a maximum
length of 300 characters.

The following example will help illustrate. To indicate that one group
should consist of sources with stack heights within ±2 meters of
weighted average stack height that also have diameters within ±1 meter
of weighted average diameter, and that a second group should consist of
sources with exit velocities below 10 m/s, the packet would be:

``` {.programlisting}
/SPECIFY ELEV GROUPS/
HT  +/-  2.0  AND  DIAMETER  +/- 1.0
VE  <  10.
/END/
```

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

###### []{#sect_input_pelvconfig_group_variables}8.9.3.1.3.1. /SPECIFY ELEV GROUPS/ variables {#specify-elev-groups-variables .title}

</div>

</div>
:::

The elevated groups packet supports the following variables:

::: {.itemizedlist}
-   HT: stack height (m)

-   DM: stack diameter (m)

-   TK: stack gas exit temperature (K)

-   VE: stack gas exit velocity (m/s)

-   FL: stack gas exit flow rate (m^3^/s)

-   \<pollutant name\>: whatever pollutant names are in the inventory
    (e.g., NOX). We do not know why a user might want this type of
    grouping, but SMOKE does not prevent it.
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

###### []{#sect_input_pelvconfig_group_criteria}8.9.3.1.3.2. /SPECIFIC ELEV GROUPS/ grouping criteria {#specific-elev-groups-grouping-criteria .title}

</div>

</div>
:::

The elevated groups packet supports the following types of grouping
criteria:

::: {.itemizedlist}
-   +/- or -/+: variable values must be within plus or minus \<value for
    criterion\> for the variable given

-   \>: variable values must be greater than \<value for criterion\> for
    the variable given

-   \>= or =\>: variable values must be greater than or equal to \<value
    for criterion\> for the variable given

-   \<: variable values must be less than \<value for criterion\> for
    the variable given

-   \<= or =\<: variable values must be less than or equal to \<value
    for criterion\> for the variable given

-   = or ==: variable values must be equal to \<value for criterion\>
    for the variable given

-   %: variable values must be less than plus or minus \<value for
    criterion\> percent different for the variable given
:::
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#sect_input_pelvconfig_ping}8.9.3.1.4. Plume-in-grid source selection {#plume-in-grid-source-selection .title}

</div>

</div>
:::

::: {.toc}
[[8.9.3.1.4.1. /SPECIFY PING/
variables](ch08s09s03.html#sect_input_pelvconfig_ping_variables)]{.section}

[[8.9.3.1.4.2. /SPECIFY PING/ selection
criteria](ch08s09s03.html#sect_input_pelvconfig_ping_criteria)]{.section}
:::

The /SPECIFY PING/ packet is used for selecting plume-in-grid sources
based on source criteria. The packet contains the following entries:

::: {.itemizedlist}
-   /SPECIFY PING/

    Must appear to start the packet. Only one packet of this type is
    permitted.

-   \<Source selection criteria, explained next\>

-   /END/

    Must appear to end the packet.
:::

The [*source selection criteria*]{.emphasis} can be as many lines as you
want. Each line contains at least three parts: (1) variable (explained
in [Section 8.9.3.1.4.1, "/SPECIFY PING/
variables"](ch08s09s03.html#sect_input_pelvconfig_ping_variables "8.9.3.1.4.1. /SPECIFY PING/ variables")),
(2) type of criterion (explained in [Section 8.9.3.1.4.2, "/SPECIFY
PING/ selection
criteria"](ch08s09s03.html#sect_input_pelvconfig_ping_criteria "8.9.3.1.4.2. /SPECIFY PING/ selection criteria")),
and (3) value for criterion in the following structure:

\<variable\> \<type of criterion\> \<value for criterion\>

This structure is the same as that of the /SPECIFY ELEV GROUPS/ packet,
and the description of the PinG source selection criteria is the same as
that of the source grouping criteria (see [Section 8.9.3.1.3, "Source
grouping"](ch08s09s03.html#sect_input_pelvconfig_group "8.9.3.1.3. Source grouping")).

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

###### []{#sect_input_pelvconfig_ping_variables}8.9.3.1.4.1. /SPECIFY PING/ variables {#specify-ping-variables .title}

</div>

</div>
:::

The PinG packet supports the same variables as the /SPECIFY ELEV GROUPS/
packet (see [Section 8.9.3.1.3.1, "/SPECIFY ELEV GROUPS/
variables"](ch08s09s03.html#sect_input_pelvconfig_group_variables "8.9.3.1.3.1. /SPECIFY ELEV GROUPS/ variables"))
and the following additional variables:

::: {.itemizedlist}
-   RISE: The plume rise as computed by the Briggs algorithm documented
    with the **Elevpoint** program (see [Section 6.3,
    "**Elevpoint**"](ch06s03.html "6.3. Elevpoint")). The \<value for
    criterion\> must be provided in meters. To select all sources with
    plume rise greater than or equal to 75 meters, you would input:

    ``` {.programlisting}
    RISE >= 75.
    ```

-   SOURCE: Source number from the intermediate inventory file output by
    **Smkinven**. This variable permits selection of specific SMOKE
    sources as PinG sources.

-   PLANT: Plant ID code from the intermediate inventory file output by
    **Smkinven**. The "[PLANT]{.quote}" variable can only be paired with
    the "[IS]{.quote}" criterion type (below); no other criterion types
    (such as "[\<]{.quote}" or "[=]{.quote}") are permitted. It is
    recommended that this variable be used in addition to the FIPS
    variable (below) to allow selection of all records at specific
    plants. It can also be combined with stack parameter variables.

-   FIPS: Country/state/county region code. This can be used with the
    "[PLANT]{.quote}" variable or other variables to specific PinG
    sources by region. It is not recommended that this variable be used
    alone for specifying PinG sources, because that would result in
    insignificant sources being prepared for the AQM as PinG sources. It
    does not make sense to process such sources as PinG sources in AQMs.
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

###### []{#sect_input_pelvconfig_ping_criteria}8.9.3.1.4.2. /SPECIFY PING/ selection criteria {#specify-ping-selection-criteria .title}

</div>

</div>
:::

The PinG packet supports the same types of criteria as the /SPECIFY ELEV
GROUPS/ packet (see [Section 8.9.3.1.3.2, "/SPECIFIC ELEV GROUPS/
grouping
criteria"](ch08s09s03.html#sect_input_pelvconfig_group_criteria "8.9.3.1.3.2. /SPECIFIC ELEV GROUPS/ grouping criteria"))
and the following additional criteria types:

::: {.itemizedlist}
-   TOP: This criterion type permits users to select sources with the
    largest values of the variable given. The \<value for criterion\> is
    the number of sources that will be selected based on the value
    given. This criterion type is permitted only when using a pollutant
    name as the \<variable\>.

-   IS: This criterion type must be used to assign a value to the
    "[PLANT]{.quote}" variable.
:::

The following example illustrates a PinG packet that uses several of the
variables and criterion types. In the following section is a further
example that demonstrates using the rest of the variables and criterion
types.

``` {.programlisting}
/SPECIFY PING/
RISE >= 150.
HT >= 100.
NOX TOP 100 AND SO2 TOP 100
NOX > 500.
/END/
```
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#d0e50252}8.9.3.1.5. Elevated source selection {#elevated-source-selection .title}

</div>

</div>
:::

The /SPECIFY ELEV/ packet is used for selecting elevated sources based
on source criteria. The packet contains the following entries:

::: {.itemizedlist}
-   /SPECIFY ELEV/

    Must appear to start the packet. Only one packet of this type is
    permitted.

-   \<Source selection criteria, explained above\>

-   /END/

    Must appear to end the packet.
:::

All of the source selection criteria for elevated sources are the same
as the PinG selection criteria at this time (see [Section 8.9.3.1.4,
"Plume-in-grid source
selection"](ch08s09s03.html#sect_input_pelvconfig_ping "8.9.3.1.4. Plume-in-grid source selection")).
To use the "[cutoff]{.quote}" method for UAM-style processing, only the
"[RISE]{.quote}" variable should be used; the packet should not contain
any other selection criteria. The "[cutoff]{.quote}" method is the
traditional approach for elevated-source selection for UAM, UAM-V, and
CAM~X~; you can decide if you want to use this traditional approach or a
more complex set of criteria.

The following example illustrates using all of the different source
selection variables and criterion types listed in the previous sections.

``` {.programlisting}
/SPECIFY ELEV/
RISE >= 40. AND RISE < 150.
NOX TOP 500
NH3 TOP 50
FIPS > 37001 AND FIPS <= 37031
SOURCE > 100 AND SOURCE < 200
/END/
```
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#sect_input_pstk}8.9.3.2. `PSTK`{.envar}: Point source stack replacement parameters file {#pstk-point-source-stack-replacement-parameters-file .title}

</div>

</div>
:::

The `PSTK`{.envar} file is an ASCII file that contains the replacement
stack parameters that **Smkinven** uses when stack parameters are
missing from the inventory. The format of the file permits stack
parameters to be replaced based on the point sources'
country/state/county code and SCC and is shown in [Table 8.80, "Format
for
`PSTK`{.envar}"](ch08s09s03.html#tbl_input_pstk "Table 8.80. Format for PSTK").

::: {.table}
[]{#tbl_input_pstk}

**Table 8.80. Format for `PSTK`{.envar}**

  Line   Position   Description
  ------ ---------- ---------------------------------------
  1+     A          Country/State/County code (Character)
         B          Twenty-digit SCC (Character)
         C          Stack height from ground (m) (Real)
         D          Stack diameter (m) (Real)
         E          Stack exhaust temperature (K) (Real)
         F          Stack exhaust velocity (m/s) (Real)
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#sect_input_ptmplist}8.9.3.3. `PTMPLIST`{.envar}: List of hourly point source emissions files {#ptmplist-list-of-hourly-point-source-emissions-files .title}

</div>

</div>
:::

The `PTMPLIST`{.envar} file is an list file containing the full name and
path of available hourly point source emissions files. This file is
created automatically from the example SMOKE run scripts. Its format is
shown in [Table 8.81, "Format for
`PTMPLIST`{.envar}"](ch08s09s03.html#tbl_input_ptmplist "Table 8.81. Format for PTMPLIST").

::: {.table}
[]{#tbl_input_ptmplist}

**Table 8.81. Format for `PTMPLIST`{.envar}**

  Line   Position   Description
  ------ ---------- ----------------------------------------------------------
  1+     A          Full name and path of hourly point source emissions file
:::
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  -------------------------- -------------------- ----------------------------
  [Prev](ch08s09s02.html)     [Up](ch08s09.html)          [Next](ch08s10.html)
  8.9.2. Mobile               [Home](index.html)     8.10. Other Support Files
  -------------------------- -------------------- ----------------------------
:::
