::: {.navheader}
4.2.4. Script settings
:::

[Prev](ch04s02s03.html) 

4.2. Test case descriptions

 [Next](ch04s02s05.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#sect_scripts_script_settings}4.2.4. Script settings {#script-settings .title}

</div>

</div>
:::

The SMOKE scripts have many environment variables that users can set
based on the program documentation in [Chapter 6, *SMOKE Core
Programs*](ch06.html "Chapter 6. SMOKE Core Programs"), as well as
environment variables that control the scripts. The variables that
control the behavior of the scripts are described in this section. The
settings are listed in alphabetical order.

[**Note that using upper case for the names of these settings in the
scripts is required. Any values that are Y or N settings must also be
upper case.**]{.bold}

For documentation on the `A_SPC_OVERRIDE`{.envar},
`N_SPC_OVERRIDE`{.envar}, `B_SPC_OVERRIDE`{.envar},
`M_SPC_OVERRIDE`{.envar}, and `P_SPC_OVERRIDE`{.envar} settings, please
refer to the `SPC_OVERRIDE`{.envar} description.

::: {.itemizedlist}
-   `AUTO_DELETE`{.envar}: \[Y \| N\] When set to Y, will delete all
    SMOKE intermediate and output I/O API files automatically. It will
    not delete intermediate and output ASCII files or reports.

-   `AUTO_DELETE_LOG`{.envar}: \[Y \| N\] When set to Y, SMOKE log files
    will be automatically deleted. Otherwise, the files will be
    automatically renamed by appending a number to the end. The first
    time the a log file needs to be overwritten, but
    `AUTO_DELETE_LOG`{.envar} is N, the file will be renamed to a file
    name with an "[\_1]{.quote}" appended to the original name. If the
    same file needs to be moved on a subsequent rerun and the
    "[\_1]{.quote}" file is already there, then a "[\_2]{.quote}" file
    will be created.

-   `CNTLCASE`{.envar}: When this is defined to a name of the control
    case and the `SMK_CONTROL_YN`{.envar} setting is Y, the following
    changes are made to the naming environment variables by the
    `$ASSIGNS`{.filename}/set\_case.scr file:

    ``` {.programlisting}
    setenv ASCEN ${ASCEN}_${CNTLCASE}
    setenv MSCEN ${MSCEN}_${CNTLCASE}
    setenv PSCEN ${PSCEN}_${CNTLCASE}
    setenv ESCEN ${ESCEN}_${CNTLCASE}
    setenv FYIOP ${FYIOP}_${CNTLCASE}
    ```

    When the `CNTLCASE`{.envar} name is set, regardless of the
    `SMK_CONTROL_YN`{.envar} setting, the
    `$ASSIGNS`{.filename}/set\_case.scr file also resets `FYINV`{.envar}
    as follows:

    ``` {.programlisting}
    setenv FYINV ${FYINV}_${CNTLCASE}
    ```

    This setting is also used for automatic naming of the
    `GCNTL`{.envar} file input to **Cntlmat**. See [Section 4.4.11,
    "Setup projection and control
    scenarios"](ch04s04s11.html "4.4.11. Setup projection and control scenarios").

-   `DEBUG_EXE`{.envar}: Should be set to the name of the fortran
    debugger (e.g., dbx) to use when running with `DEBUGMODE`{.envar}
    set to Y.

-   `DEBUGMODE`{.envar}: \[Y \| N\] When set to Y, the scripts will try
    to invoke the debug versions of the SMOKE executables. These will
    only be available to be used if the debug versions of the
    executables have been created using the **Makeall debug** command in
    the `$SCRIPTS`{.filename}/make directory.

-   `FYEAR`{.envar}: The 4-digit future year value is used for renaming
    files and directories when the `SMK_FUTURE_YN`{.envar} setting is Y.
    When this is true, the following changes are made to the naming
    environment variables by the `$ASSIGNS`{.filename}/set\_case.scr
    script:

    ``` {.programlisting}
    setenv ASCEN   ${ASCEN}-${fyr2}
    setenv MSCEN   ${MSCEN}-${fyr2}
    setenv PSCEN   ${PSCEN}-${fyr2}
    setenv ESCEN   ${ESCEN}-${fyr2}
    setenv FYIOP   ${INVOP}-${fyr2}
    ```

    where `${fyr2}`{.envar} is the last two digits of the
    `FYEAR`{.envar} value. These 2 digits are inserted into the output
    file names for **Smkinven** output files when
    `SMK_FUTURE_YN`{.envar} is set to Y.

    In addition, when `FYEAR`{.envar} is defined, the
    `$ASSIGNS`{.filename}/set\_case.scr script makes the follows
    settings regardless of the value of `SMK_FUTURE_YN`{.envar}.

    ``` {.programlisting}
    setenv FYINV ${FYINV}_${fyr2}
    setenv BYFYR ${BYFYR}_${fyr2}
    ```

    This setting is also used for automatic naming of the
    `GCNTL`{.envar} file input to **Cntlmat**. See [Section 4.4.11,
    "Setup projection and control
    scenarios"](ch04s04s11.html "4.4.11. Setup projection and control scenarios").

-   `G_STDATE_ADVANCE`{.envar}: The value should be set to the number of
    days for 1 run of the **Temporal**, **Laypoint**, and **Smkmerge**
    programs. The example scripts have this set by the `NDAYS`{.envar}
    environment variable in the Assigns file. When this value is set,
    the Assigns file will automatically increment the `ESDATE`{.envar}
    and `G_STDATE`{.envar} environment variables (that control SMOKE
    file names and time-dependent programs, respectively) to the next
    day. This feature is unable to cross from one year to the next.

-   `INVTABLE_OVERRIDE`{.envar}: Sets a file name for the
    `INVTABLE`{.envar} file in the Assigns file that overrides whatever
    value is actually inside the Assigns file. The Assigns file invokes
    the override mechanism when this environment variable is defined, so
    to [*not*]{.emphasis} use this scripting feature, the variable must
    [*not*]{.emphasis} be defined. [**In other words, it is not
    acceptable to set this to a blank value.**]{.bold}

-   `MRG_GRDOUT_UNIT`{.envar}: While this setting is primarily a setting
    for the **Smkmerge** program, it is also used by the SMOKE scripts
    to determine whether **Smkmerge** should use mole-based or
    mass-based speciation matrices and biogenic model-ready files. When
    the variable is set with the first four letters to "[mole]{.quote}",
    for example moles/hr, mole/s, or moles/day, the **Smkmerge** program
    will be provided by the scripts the correct input files. The
    implementation of this feature currently means that units of "[gm
    mole]{.quote}" will not work properly.

-   `NONROAD`{.envar}: \[Y \| N\] When set to Y, the Assigns file will
    automatically rename all of the SMOKE area-source intermediate and
    output files using the "[n]{.quote}" prefix on file names instead of
    the "[a]{.quote}" prefix. For example, the `ATMP`{.envar} file is
    set to `$SCENARIO`{.filename}/ntmp.ncf instead of
    `$SCENARIO`{.filename}/atmp.ncf. Also, the `AREA`{.envar} file
    coming out of **Smkinven** changes to be a different name and use a
    different map-file directory.

-   `PROMPTFLAG`{.envar}: \[Y \| N\] When set to Y, users will be
    prompted for all SMOKE file names. This option should not be set to
    Y for non-interactive processing. In fact, there is little need for
    this to ever be set to Y.

-   `QA_LABEL`{.envar}: Users can label their **Smkreport** log files
    and QA reports using this label. Typically, the QA report names are
    named using the `$FYIOP`{.envar} variable or `$ESCEN`{.envar}
    variable set in the `$ASSIGNS`{.filename}/set\_case.scr script. When
    `QA_LABEL`{.envar} is set to something, the log files and reports
    are labeled with `$FYIOP`{.envar}.`$QA_LABEL`{.envar} or
    `$ESCEN`{.envar}.`$QA_LABEL`{.envar}. This renaming is done in the
    `qa_run.csh`{.filename} helper script in the
    `$SCRIPTS`{.filename}/run directory.

-   `QA_TYPE`{.envar}: \[none \| all \| part1 \| part2 \| part3 \| part4
    or custom\]. This setting controls the `qa_run.csh`{.filename}
    helper script and causes different reports to be written. The
    `QA_TYPE`{.envar} settings will cause the script to use different
    `REPCONFIG`{.envar} files for input to **Smkreport**, and the
    `REPCONFIG`{.envar} files determine which reports are generated.
    [Section 4.4.22, "Change
    reports"](ch04s04s22.html "4.4.22. Change reports") explains these
    default settings and how to change them to create the reports that
    you need.

-   `RUN_PART1`{.envar}, `RUN_PART2`{.envar}, `RUN_PART3`{.envar},
    `RUN_PART4`{.envar}: These settings should not have to be changed by
    most users. They are included for the convenience of those who want
    to more easily rearrange their SMOKE processing. Each source
    category has its own parts for processing as follows:

    ::: {.informaltable}
                            Area                                                              Biogenic                                 Mobile                                                            Point
      --------------------- ----------------------------------------------------------------- ---------------------------------------- ----------------------------------------------------------------- -----------------------------------------------------------------
      `RUN_PART1`{.envar}   **Smkinven**, **Spcmat**, **Grdmat**, **Cntlmat**, **Grwinven**   **Rawbio**, **Normbeis3**, **Metscan**   **Smkinven**, **Spcmat**, **Grdmat**, **Cntlmat**, **Grwinven**   **Smkinven**, **Spcmat**, **Grdmat**, **Cntlmat**, **Grwinven**
      `RUN_PART2`{.envar}   **Temporal**                                                      **Tmpbio**, **Tmpbeis3**                 **Temporal**                                                      **Temporal**
      `RUN_PART3`{.envar}                                                                                                                                                                                **Elevpoint**
      `RUN_PART4`{.envar}   **Smkmerge**, **Mrggrid**, **Smk2emis**                           **Mrggrid**, **Smk2emis**                **Movesmrg**, **Mrggrid**, **Smk2emis**                           **Laypoint**, **Smkmerge**, **Mrggrid**, **Smk2emis**
    :::

-   `RUN_<Program Name>`{.envar}: \[Y \| N\] The collection of
    `RUN_<Program Name>`{.envar} variables control whether a program is
    going to be run during a given script run. These can be set to N if
    the program is not needed for some reason. How these settings should
    be set is described in [Section 4.4.6, "Change which programs are
    run"](ch04s04s06.html "4.4.6. Change which programs are run").

-   `SMK_FUTURE_YN`{.envar}: \[Y \| N\] When set to Y, the file names
    and output directories are changed to use the `FYEAR`{.envar}
    variable setting in the names. See the `FYEAR`{.envar} documentation
    for more information on how the naming variables are set. This
    setting is needed only in scripts for processing future-year cases.

-   `SPC_OVERRIDE`{.envar}: Sets a value for the `SPC`{.envar} variable
    in the Assigns file that overrides whatever value is actually inside
    the Assigns file. The Assigns file invokes the override mechanism
    when this environment variable is defined, so to not use this
    scripting feature, the variable must not be defined. [**In other
    words, it is not acceptable to set this to a blank value.**]{.bold}

    In addition, the merge scripts that run the **Mrggrid** program can
    also use the `A_SPC_OVERRIDE`{.envar}, `N_SPC_OVERRIDE`{.envar},
    `B_SPC_OVERRIDE`{.envar}, `M_SPC_OVERRIDE`{.envar}, and
    `P_SPC_OVERRIDE`{.envar} settings. These settings override the
    `SPC`{.envar} variable used [*only*]{.emphasis} for the definition
    of the `A_OUT`{.envar}, `N_OUT`{.envar}, `B_OUT`{.envar},
    `M_OUT`{.envar}, and `P_OUT`{.envar} directories that contain the
    hourly, gridded, and speciated SMOKE output files. These settings
    can be used to pull multiple chemical mechanisms (such as toxics and
    non-toxics) into a single model-ready file. The user must determine
    which multiple mechanisms are appropriate to combine. It is
    acceptable to combine toxics-integrated and criteria-only current
    CB6 mechanisms, but inappropriate to combine CB6 and SARPRC
    mechanisms.

-   `SRCABBR`{.envar}: Sets the source category abbreviation name for
    use in naming log files. The typical settings are ar (area sources),
    nr (nonroad sources), mb (mobile sources), bg (biogenic sources),
    and pt (point sources).

-   `YEAR_OVERRIDE`{.envar}: Sets a value for the `YEAR`{.envar}
    variable in the Assigns file that overrides whatever value is
    actually inside the Assigns file. The Assigns file invokes the
    override mechanism when this environment variable is defined, so to
    not use this scripting feature, the variable must not be defined.
    [**In other words, it is not acceptable to set this to a blank
    value.**]{.bold}
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  ------------------------------------------------- -------------------- ---------------------------------------------------
  [Prev](ch04s02s03.html)                            [Up](ch04s02.html)                              [Next](ch04s02s05.html)
  4.2.3. Example script files and their purposes     [Home](index.html)     4.2.5. SMOKE settings controlled through scripts
  ------------------------------------------------- -------------------- ---------------------------------------------------
:::
