::: {.navheader}
2.16.2. MOVES Model Processing
:::

[Prev](ch02s16.html) 

2.16. Mobile-source processing with MOVES

 [Next](ch02s16s03.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#d0e7036}2.16.2. MOVES Model Processing {#moves-model-processing .title}

</div>

</div>
:::

::: {.toc}
[[2.16.2.1. MOVES Driver Script](ch02s16s02.html#d0e7039)]{.section}

[[2.16.2.2. MOVES Post-processing
Script](ch02s16s02.html#d0e7060)]{.section}
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e7039}2.16.2.1. MOVES Driver Script {#moves-driver-script .title}

</div>

</div>
:::

The inputs to [the MOVES Driver
Script](ch05s02s02.html "5.2.2. MOVES Driver Scripts")
(**Runspec\_generator.pl**) include the temperature and humidity
conditions output from **Met4moves** and two additional inputs, the
RunControl and RepCounty files. The RunControl file contains pollutant
selections and the file path location to the **Met4moves** output. The
RepCounty file contains file path locations to user-created
MOVES-formatted inputs for age distribution, fuel supply and
formulation, inspection and maintenance programs, county level
population and annual VMT for each representative county. Precise
formats of the RunControl and RepCounty files can be found in the
[Section 8.9.2.2.2, "Representative County File for MOVES Driver
Script"](ch08s09s02.html#sect_input_refcountyfile "8.9.2.2.2. Representative County File for MOVES Driver Script")
and [Section 8.9.2.2.1, "Run Control File for MOVES Driver
Script"](ch08s09s02.html#sect_input_runctlfile "8.9.2.2.1. Run Control File for MOVES Driver Script").
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e7060}2.16.2.2. MOVES Post-processing Script {#moves-post-processing-script .title}

</div>

</div>
:::

A MOVES Driver Script to automates the MOVES run setups and prepare two
kinds of batch files. When launched, the batch files instruct MOVES to:

::: {.itemizedlist}
-   import data into MySQL County Scale databases

-   run MOVES for each runspec file
:::

The resulting RatePerDistance (RPD), RatePerVehicle (RPV),
RatePerProfile (RPP), and RatePerHour (RPH) tables contain all the
conditions needed for regional modeling using SMOKE modeling system.

Once a MOVES batch run completes, MOVES populates the four output lookup
tables with formats listed in [Table 2.10, "MOVES Emission Rate Lookup
Table (MOVES
Format)"](ch02s16s02.html#tbl_concepts_moves_lookup_tbl_mv_format "Table 2.10. MOVES Emission Rate Lookup Table (MOVES Format)").
A [MOVES Post-processing
Script](ch05s02s04.html "5.2.4. MOVES Post-processing scripts")
(**Moves2smkEF.pl**) in Perl interacts with MySQL to modify the default
formats shown in [Table 2.10, "MOVES Emission Rate Lookup Table (MOVES
Format)"](ch02s16s02.html#tbl_concepts_moves_lookup_tbl_mv_format "Table 2.10. MOVES Emission Rate Lookup Table (MOVES Format)")
into a text ASCII-format readable by SMOKE, shown in [Table 2.11, "MOVES
Emission Rate Lookup Table (SMOKE
Format)"](ch02s16s02.html#tbl_concepts_moves_lookup_tbl_sm_format "Table 2.11. MOVES Emission Rate Lookup Table (SMOKE Format)").

::: {.table}
[]{#tbl_concepts_moves_lookup_tbl_mv_format}

**Table 2.10. MOVES Emission Rate Lookup Table (MOVES Format)**

RatePerDistance (grams/mile)
:::
:::
:::

RatePerVehicle (grams/vehicle/hour)

RatePerProfile (grams/vehicle/hour)

RatePerHour (grams/activity-hour)

MOVESScenarioID

MOVESScenarioID

MOVESScenarioID

MOVESScenarioID

MOVESRunID

MOVESRunID

MOVESRunID

MOVESRunID

yearID

yearID

temperatureProfileID

yearID

monthID

monthID

yearID

monthID

dayID

dayID

dayID

dayID

hourID

hourID

hourID

hourID

linkID

zoneID

pollutantID

linkID

pollutantID

pollutantID

processID

pollutantID

processID

processID

sourceTypeID

processID

sourceTypeID

sourceTypeID

SCC

sourceTypeID

SCC

SCC

fuelTypeID

SCC

fuelTypeID

fuelTypeID

modelYearID

fuelTypeID

modelYearID

modelYearID

Temperature

modelYearID

roadTypeID

Temperature

RatePerProfile

roadTypeID

avgSpeedBinID

RatePerVehicle

 

Temperature

Temperature

 

 

RatePerHour

relHumidity

 

 

 

RatePerDistance

 

 

 

The MOVES Post-processing Script converts the MOVES format Emission Rate
Lookup Table to the SMOKE format Emission Rate Table by performing the
following:

::: {.itemizedlist}
-   Parses the state-county FIPS code from linkID, zoneID or
    TemperatureProfileID and stores it as a unique field, FIPS.

-   Removes fields that are uninformative to SMOKE, including the MOVES
    source type, fuel type and road type, hourID in RatePerDistance,
    TemperatureProfileID in RatePerProfile.

-   Reduces the output database table size by performing a cross-tab
    query on the pollutant emissions, listing each pollutant in a
    separate field rather than in a single column with a higher number
    of data records. The script also sorts the lookup tables by
    countyID, monthID and SCC for more efficient processing in SMOKE.

-   Optionally calculates additional output pollutants or species by
    applying user-specified formulas to MOVES-created emission factors.

-   Write out to the ASCII-formatted four processed SMOKE-ready MOVES
    lookup tables \[RatePerDistance (RPD), RatePerVehicle (RPV),
    RatePerProfile (RPP), and RatePerHour (RPH)\].
:::

::: {.table}
[]{#tbl_concepts_moves_lookup_tbl_sm_format}

**Table 2.11. MOVES Emission Rate Lookup Table (SMOKE Format)**

RatePerDistance (grams/mile)
:::

RatePerVehicle (grams/vehicle/hour)

RatePerProfile (grams/vehicle/hour)

RatePerHour (grams/activity-hour)

MOVESScenarioID

MOVESScenarioID

MOVESScenarioID

MOVESScenarioID

yearID

yearID

yearID

yearID

monthID

monthID

monthID

monthID

FIPS

dayID

dayID

FIPS

SCC

hourID

hourID

SCC

avgSpeedBin

FIPS

FIPS

temperature

temperature

SCC

SCC

CO

relHumidity

temperature (for each grid cell)

temperature (24hr temporal profile)

TOG

CO

CO

THC

BENZENE

TOG

NOX

TOG

NOX

BENZENE

PM10OC

VOC

VOC

\...

\...

\...

\...

::: {.navfooter}

------------------------------------------------------------------------

  -------------------------------------------- -------------------- ---------------------------------
  [Prev](ch02s16.html)                          [Up](ch02s16.html)            [Next](ch02s16s03.html)
  2.16. Mobile-source processing with MOVES     [Home](index.html)     2.16.3. SMOKE Model Processing
  -------------------------------------------- -------------------- ---------------------------------
:::
