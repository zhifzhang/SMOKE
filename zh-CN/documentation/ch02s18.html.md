::: {.navheader}
2.18. Creating model-ready emissions
:::

[Prev](ch02s17.html) 

Chapter 2. SMOKE Concepts

 [Next](ch02s19.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

[]{#sect_concepts_merge_processing}2.18. Creating model-ready emissions {#creating-model-ready-emissions .title style="clear: both"}
-----------------------------------------------------------------------

</div>

</div>
:::

Creating emissions with SMOKE that are ready for input to an AQM must
always include merging the hourly emissions created during temporal
processing with the gridding matrices and the speciation matrices. In
addition, for point sources for CMAQ, creating the model-ready emissions
must also include merging with the layer fractions (see [Section 2.15.1,
"Computing layer fractions for
CMAQ"](ch02s15.html#sect_concepts_compute_layer_cmaq "2.15.1. Computing layer fractions for CMAQ")),
and for UAM-based models it must include creating the ASCII elevated
file (see [Section 2.15.2, "Creating an elevated-source file for UAM and
CAM~X~"](ch02s15s02.html "2.15.2. Creating an elevated-source file for UAM and CAMX")).
The **Smkmerge** program performs these processing steps using
vector-matrix multiplication to combine the matrices and layer fractions
with the hourly emissions vectors from the **Temporal** program.

If the overall SMOKE processing setup includes running the nonroad
mobile category (or other source categories) as separate runs (see
[Chapter 4, *How to Use
SMOKE*](ch04.html "Chapter 4. How to Use SMOKE"), then **Smkmerge**
cannot be used to combine all source categories into a single output
file. Instead, the [**Mrggrid**](ch06s08.html "6.8. Movesmrg") program
would combine the model-ready files from the individual source
categories; for example, from separate SMOKE (including **Smkmerge**)
runs for stationary area/nonpoint, nonroad mobile, windblown dust,
wildfire, on-road mobile, and point sources. There is no limit to the
number of model-ready files that **Mrggrid** can combine into a single
model-ready file, and the input files can be 2-D or 3-D.

**Smkmerge** can be run for any or all SMOKE source categories, but it
can use only one of each SMOKE inventory type (area, biogenic, mobile,
and point source) per run. You can run it to create model-ready files
for only one SMOKE source category (area, biogenic, mobile, or point),
or you can run it to create both the individual and combined model-ready
files. The following list indicates the modes in which **Smkmerge** can
be run:

::: {.itemizedlist}
-   Run for SMOKE area sources to create gridded, hourly, speciated
    emissions in moles/hour or moles/second. Can be used for all area
    sources and/or nonroad mobile sources.

-   Run for SMOKE mobile sources to create gridded, hourly, speciated
    emissions in moles/hour or moles/ second.

-   Run for SMOKE point sources to create 3-D gridded, hourly, speciated
    emissions in moles/ second for CMAQ, [*or*]{.emphasis} run to create
    2-D gridded, hourly, speciated emissions in moles/hour for UAM, or
    CAM~X~ and an ASCII elevated-point-source file.

-   Run to convert the units and calculate state and county totals of
    biogenic emissions output by the **Tmpbio** or **Tmpbeis3**
    programs.

-   Run to perform any combination of the previously listed steps
    simultaneously and create a combined model-ready file that includes
    multiple source categories. In this mode, only one each of SMOKE
    area, mobile, point, and biogenic sources can be included. The same
    output units must be used for all source categories in a single run.
:::

When creating model-ready emissions for any of the anthropogenic source
categories, you may choose to apply one or more control matrices to the
emissions to create controlled model-ready emissions. For each source
category (area, mobile, or point), you can apply one multiplicative
control matrix and one reactivity control matrix per run per source
category. **Smkmerge** is the only way you can apply the reactivity
control matrix to the inventory, while the multiplicative control matrix
can be applied by either **Smkmerge** or the **Grwinven** program.

Many processing steps in SMOKE are independent of one another; for
example, chemical speciation and temporal allocation can change without
affecting one another. This independence means that when one step
changes, another step does not need to be rerun in many cases. However,
because **Smkmerge** combines the data from all of these processing
steps to create the model-ready emissions, if one of the earlier steps
changes, then the merging step must also be rerun. This includes
rerunning **Smkmerge** to generate model-ready files, and if the
**Mrggrid** program was used, also rerunning that to merge data from
multiple source categories together.

**Smkmerge** also has the ability to input hourly emissions by day of
the week and reuse days that are the same. For example, it can input
separate hourly emissions files for Monday, a weekday, Saturday, and
Sunday, and use these four files to generate model-ready emissions for
every day in an entire month. This is accomplished using the
`MRG_BYDAY`{.envar} SMOKE option, described further in [Section 6.14,
"**Smkmerge**"](ch06s14.html "6.14. Smkmerge"). Special treatment can
also be given to holidays in this case, since users generally wish to
model holidays differently than other days.
:::

::: {.navfooter}

------------------------------------------------------------------------

  ---------------------------- -------------------- -----------------------------------------------------------------
  [Prev](ch02s17.html)           [Up](ch02.html)                                                 [Next](ch02s19.html)
  2.17. Biogenic processing     [Home](index.html)     2.19. Creating model-ready emissions using MOVES lookup tables
  ---------------------------- -------------------- -----------------------------------------------------------------
:::
