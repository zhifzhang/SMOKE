::: {.navheader}
2.10. Temporal processing
:::

[Prev](ch02s09s19.html) 

Chapter 2. SMOKE Concepts

 [Next](ch02s10s02.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

[]{#sect_concepts_temporal_processing}2.10. Temporal processing {#temporal-processing .title style="clear: both"}
---------------------------------------------------------------

</div>

</div>
:::

::: {.toc}
[[2.10.1. Using annual or average-day
data](ch02s10.html#d0e4954)]{.section}

[[2.10.2. Applying monthly, weekly, and diurnal
profiles](ch02s10s02.html)]{.section}

[[2.10.3. Using day- and hour-specific
emissions](ch02s10s03.html)]{.section}

[[2.10.4. Time zone adjustments](ch02s10s04.html)]{.section}

[[2.10.5. Holiday processing](ch02s10s05.html)]{.section}

[[2.10.6. Monday, weekday, Saturday, Sunday
processing](ch02s10s06.html)]{.section}

[[2.10.7. Processing Non-sequential Dates](ch02s10s07.html)]{.section}

[[2.10.8. Creating the intermediate files](ch02s10s08.html)]{.section}
:::

The temporal allocation of emission inventory data always occurs after
the inventory import processing previously described in [Section 2.9,
"Inventory import"](ch02s09.html "2.9. Inventory import"). The
**Temporal** program processes data for anthropogenic sources, while the
**Tmpbio** program allocates biogenic emissions. In this section, we
focus on the temporal allocation of the anthropogenic inventories using
**Temporal**. The biogenic processing is further described in
[Section 2.17, "Biogenic
processing"](ch02s17.html "2.17. Biogenic processing").

The primary purpose of the **Temporal** program is to create an
intermediate hourly emissions file (`ATMP`{.envar}, `MTMP`{.envar}, or
`PTMP`{.envar}). It also creates a supplementary intermediate file that
indicates which monthly, weekly (day-of-week), and diurnal (hourly)
profiles were assigned to each source (`ATSUP`{.envar}, `MTSUP`{.envar},
or `PTSUP`{.envar}). Since the **Temporal** dynamically create names for
the output files, two new environment variables `[A|M|P]TMPNAME`{.envar}
and `[A|M|P]TSUPNAME`{.envar} are used to set the directory and file
prefix for naming the output files `[A|M|P]TMP`{.envar} and
`[A|M|P]TSUP`{.envar}. The files are named using the starting date of
each time period.For example, if `ATMPNAME`{.envar} is set to
/data/ntmp.nctox., then the `ATMP`{.envar} file for a given time period
will be put in the data directory and named ntmp.nctox.\[start
date\].ncf.

The temporal processing operation applies factors based on the source
characteristics to the emissions data from the SMOKE inventory files.
These factors can include monthly, weekly, and diurnal temporal
profiles. The resulting emissions data vectors (not a matrix) contain
hourly emissions for the inventory species. SMOKE assumes an hourly time
step (Even though the time step is an input setting to SMOKE, it
currently cannot be changed.). Most of the calculations are implemented
as sparse-matrix algebra based upon temporal cross-references and
profiles, augmented by the substitution of values from day- and
hour-specific emissions data sets. For mobile sources, hourly emissions
values also depend on meteorology (e.g., the temperature dependence of
evaporative emissions).

[Figure 2.20, "Transformation of inventory data to hourly
data"](ch02s10.html#fig_concepts_temporal_processing "Figure 2.20. Transformation of inventory data to hourly data")
shows how data from the intermediate inventory are stored in the hourly
file. The arrow represents the temporal processing steps which convert
the annual, average-day, or day- and hour-specific data to hourly data.
After the temporal processing, the hourly emissions are stored in the
intermediate hourly file, by hour and source number. The emissions are
stored in the same order as the sources in the sorted intermediate
inventory file.

::: {.figure}
[]{#fig_concepts_temporal_processing}

**Figure 2.20. Transformation of inventory data to hourly data**

::: {.mediaobject}
![Transformation of inventory data to hourly
data](images\concepts\temporal_processing_html.jpg)
:::
:::

Temporal processing also addresses the following issues that need to be
considered during emissions processing:

::: {.orderedlist}
1.  Using annual or average-day data when both are available in the
    inventory

2.  Applying monthly, weekly, and diurnal profiles

3.  Using day- and hour-specific emissions

4.  Time zone adjustments

5.  Holiday processing

6.  Monday-weekday-Saturday-Sunday (MWSS) processing

7.  Processing non-sequential dates

8.  Creating the intermediate files
:::

In the subsections below, we address each of these issues in the same
order as the list above.

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#d0e4954}2.10.1. Using annual or average-day data {#using-annual-or-average-day-data .title}

</div>

</div>
:::

When using the ORL or FF10 inventory format, you may choose to use
either the annual or the average-day emissions values when running the
**Temporal** program. The default is to use the annual data. To apply
average-day data instead, the `SMK_AVEDAY`{.envar} setting is used (this
setting is relevant only for ORL or FF10 inventories). These emissions
are then used in the merge-processing step, resulting in model-ready
emissions that depend on the data type selected. If part of your
inventory is available as average-day data and part is available as
annual data, you have used **Smkinven** to fill in annual values based
on the average-day values. The **Temporal** program is then run using
annual values. **Temporal** ensures that for those sources for which
"[annual]{.quote}" values were created, only day-of-week and hourly
adjustments (not monthly profiles) are applied. **Temporal** assumes
that any average-day data provided has already been adjusted for a
specific month, and therefore does not apply the monthly profiles to
them.
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  -------------------------------------------- -------------------- ---------------------------------------------------------
  [Prev](ch02s09s19.html)                        [Up](ch02.html)                                      [Next](ch02s10s02.html)
  2.9.19. Processing hour-specific CEM data     [Home](index.html)     2.10.2. Applying monthly, weekly, and diurnal profiles
  -------------------------------------------- -------------------- ---------------------------------------------------------
:::
