::: {.navheader}
6.10.3. Files and Environment Variables
:::

[Prev](ch06s10s02.html) 

6.10. **Mrggrid**

 [Next](ch06s11.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#d0e26784}6.10.3. Files and Environment Variables {#files-and-environment-variables .title}

</div>

</div>
:::

::: {.toc}
[[6.10.3.1. Input Files](ch06s10s03.html#d0e26815)]{.section}

[[6.10.3.2. Input Environment
Variables](ch06s10s03.html#d0e26887)]{.section}

[[6.10.3.3. Output Files](ch06s10s03.html#d0e26946)]{.section}
:::

::: {.figure}
[]{#fig_programs_mrggrid}

**Figure 6.10. Mrggrid input and output files**

::: {.mediaobject}
![Mrggrid input and output files](images\programs\mrggrid_html.jpg)
:::
:::

[Figure 6.10, "Mrggrid input and output
files"](ch06s10s03.html#fig_programs_mrggrid "Figure 6.10. Mrggrid input and output files")
shows the input and output files for the **Mrggrid** program. The input
file is simply a list of the logical file names for the files to be
merged (`FILELIST`{.envar}). The program outputs a log file
(`LOGFILE`{.envar}), a gridded, optionally layered, optionally hourly
emissions file (`OUTFILE`{.envar}), and if merging different days, a
report file (`REPMRGGRID`{.envar}).

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e26815}6.10.3.1. Input Files {#input-files .title}

</div>

</div>
:::

::: {.informaltable}
+-----------------------+--------+-----------------------------+
| File Name             | Format | Description                 |
+=======================+========+=============================+
| `FILELIST`{.envar}    | ASCII  | List of                     |
|                       |        | [*logical*]{.emphasis} file |
|                       |        | name for 2-D and 3-D        |
|                       |        | gridded I/O API NetCDF      |
|                       |        | files; this file cannot     |
|                       |        | contain the full paths and  |
|                       |        | file names. Users should    |
|                       |        | make sure that the logical  |
|                       |        | file names that appear in   |
|                       |        | `FILELIST`{.envar} are      |
|                       |        | defined prior to running    |
|                       |        | **Mrggrid**.                |
+-----------------------+--------+-----------------------------+
| `ADJ_FACS`{.envar}    | ASCII  | File that lists the species |
|                       |        | name, the logical file      |
| (optional)            |        | name, and the factor to be  |
|                       |        | applied to all grid cells.  |
|                       |        | The species name must be in |
|                       |        | columns A, the logical file |
|                       |        | name in column B, and the   |
|                       |        | factor in columns C. SMOKE  |
|                       |        | will ignore the case of the |
|                       |        | text, treating lower- and   |
|                       |        | uppercase characters as if  |
|                       |        | they were the same. For     |
|                       |        | example, the following      |
|                       |        | `ADJ_FACS`{.envar} file     |
|                       |        | sample would multiply NO    |
|                       |        | emissions from the MGTS\_L  |
|                       |        | file by 1.3 (30% increase)  |
|                       |        | and multiply PAR from the   |
|                       |        | PGTS\_L file by 0.6 (40%    |
|                       |        | decrease).                  |
|                       |        |                             |
|                       |        | ``` {.programlisting}       |
|                       |        | NO, MGTS_L, 1.3             |
|                       |        | PAR, PGTS_L, 0.6            |
|                       |        | ```                         |
+-----------------------+--------+-----------------------------+
| `TAG_SPECIES`{.envar} | ASCII  | File that lists the logical |
|                       |        | file name, the species      |
| (optional)            |        | name, and the tag name to   |
|                       |        | be appended. The logical    |
|                       |        | file name in column B, the  |
|                       |        | species name must be in     |
|                       |        | columns B, and the factor   |
|                       |        | in columns C. SMOKE will    |
|                       |        | ignore the case of the      |
|                       |        | text, treating lower- and   |
|                       |        | uppercase characters as if  |
|                       |        | they were the same. For     |
|                       |        | example, the following      |
|                       |        | `TAG_SPECIES`{.envar} file  |
|                       |        | sample would append a tag   |
|                       |        | (t1) to the NO species from |
|                       |        | the MGTS\_L file and append |
|                       |        | a tag (t3) to the PAR from  |
|                       |        | the PGTS\_L file.           |
|                       |        |                             |
|                       |        | ``` {.programlisting}       |
|                       |        | MGTS_L, NO,  t1             |
|                       |        | PGTS_L, PAR, t3             |
|                       |        | ```                         |
+-----------------------+--------+-----------------------------+
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e26887}6.10.3.2. Input Environment Variables {#input-environment-variables .title}

</div>

</div>
:::

::: {.itemizedlist}
-   `MRG_DIFF_DAYS`{.envar}: \[default: N\]

    This environment variable allows **Mrggrid** to merge files with
    data from different days.

    ::: {.itemizedlist}
    -   Y: Allow data from different dates to be merged together

        **Mrggrid** will use the environment variables
        `G_STDATE`{.envar}, `G_STTIME`{.envar}, `G_RUNLEN`{.envar}, and
        `G_TSTEP`{.envar} to set the start date, start time, length, and
        time step of the output file. All input files must have the same
        starting time as `G_STTIME`{.envar}, the same time step as
        `G_TSTEP`{.envar}, and must contain more than `G_RUNLEN`{.envar}
        steps of data. For each input file, if it contains data to cover
        the actual episode requested by `G_STDATE`{.envar},
        `G_STTIME`{.envar}, and `G_RUNLEN`{.envar}, then the data for
        the actual episode will be used; otherwise, data starting at the
        first time step of the file will be used.

    -   N: Require all merged data to be from the same date

        **Mrggrid** will determine the output file time period based on
        the latest starting input file and the earliest ending input
        file.
    :::
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e26946}6.10.3.3. Output Files {#output-files .title}

</div>

</div>
:::

::: {.informaltable}
  File Name                Format           Description
  ------------------------ ---------------- -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  `LOGFILE`{.envar}        ASCII            Log generated from executing **Mrggrid**
  `OUTFILE`{.envar}        I/O API NetCDF   Gridded, optionally layered, optionally hourly emission file
  `REPMRGGRID`{.envar}     ASCII            Report file generated when `MRG_DIFF_DAYS`{.envar} is set to Y; the report lists the date and time for each output time step along with the actual date and time of the data read from each file
  `REPMERG_ADJ`{.envar}    ASCII            Report file generated when `ADJ_FACS`{.envar} is set; the report lists the date, the logical file name, the species name, the factor applied, a daily total of species before and after applying adjustment factor, and the ratio (after/ratio). The report only lists when the ratio is not equal to 1.0
  `REPMERGE_SUM`{.envar}   ASCII            Report file generated when `ADJ_FACS`{.envar} is set; the report lists the date, the species name, a daily total of species over all the logical files before and after applying adjustment factors, and the ratio (after/ratio). The report only lists when the ratio is not equal to 1.0
  `REPMERGE_TAG`{.envar}   ASCII            Report file generated when `TAG_SPECIES`{.envar} is set; the report lists the logical files name, species name before and after appending the tag
:::
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  --------------------------- -------------------- -----------------------
  [Prev](ch06s10s02.html)      [Up](ch06s10.html)     [Next](ch06s11.html)
  6.10.2. Processing Order     [Home](index.html)          6.11. **Mrgpt**
  --------------------------- -------------------- -----------------------
:::
