::: {.navheader}
6.14. **Smkmerge**
:::

[Prev](ch06s13s03.html) 

Chapter 6. SMOKE Core Programs

 [Next](ch06s14s02.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

[]{#sect_programs_smkmerge}6.14. **Smkmerge** {#smkmerge .title style="clear: both"}
---------------------------------------------

</div>

</div>
:::

::: {.toc}
[[6.14.1. Description](ch06s14.html#d0e28982)]{.section}

[[6.14.2. Processing Order](ch06s14s02.html)]{.section}

[[6.14.3. Files and Environment Variables](ch06s14s03.html)]{.section}
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#d0e28982}6.14.1. Description {#description .title}

</div>

</div>
:::

::: {.toc}
[[6.14.1.1. By-day processing](ch06s14.html#d0e29012)]{.section}
:::

[*Processing categories:*]{.emphasis} area, biogenic, mobile, point

The **Smkmerge** program combines the matrices produced by the other
SMOKE programs to produce the emissions files for input to the AQM. The
**Smkmerge** program may be run on any combination of source types and
may incorporate temporal, speciation, projection, and spatial
processing.

If **Smkmerge** is run to produce the input files to the AQM, all the
other SMOKE programs must already have been run. However, you can also
run **Smkmerge** to produce specialized reports. In that instance, only
the required subset of SMOKE programs must have been run prior to
**Smkmerge**.

**Smkmerge** can be used to create 2-D or 3-D gridded, hourly, speciated
files. It also outputs the hourly emissions file for PinG sources needed
by CMAQ. Finally, it outputs an ASCII elevated point sources file,
suitable for postprocessing with the Ptsrce program of EPS2.0/EPS2.5. If
PinG sources have been selected and an ASCII elevated sources file is
output, then SMOKE will set the stack diameters to negative values for
the PinG sources.

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e29012}6.14.1.1. By-day processing {#by-day-processing .title}

</div>

</div>
:::

**Smkmerge** can use a by-day processing approach, to read in one-day
hourly files for each day of the week. When the `MRG_BYDAY`{.envar}
environment variable is set to A, M, P, or any combination of those
letters, **Smkmerge** reads a different logical file name for each day
of the week for the hourly emission input files for the indicated
sources.

For example, if the `MRG_SOURCE`{.envar} environment variable is set to
AMBP, **Smkmerge** will expect the following hourly input files:
`ATMP`{.envar}, `BGTS_[S|L]`{.envar}, `MTMP`{.envar}, and
`PTMP`{.envar}, for area, biogenic, mobile, and point source types
respectively. If, in addition, `MRG_BYDAY`{.envar} is set to
"[A]{.quote}", then the hourly input files expected by **Smkmerge** for
area sources would be the `ATMP_{day}`{.envar} files. The files for the
other source types would remain the same.

The `MRG_BYDAY`{.envar} option is useful for implementing a
Monday-weekday-Saturday-Sunday (MWSS) approach to save processing time
for long episodes. This approach is applicable when weekly temporal
profiles used by an inventory do not have variation between the five
weekdays. In the MWSS approach, Monday is processed separately, because
time zone differences across a large domain cause some Sunday emissions
for some time zones to be in the Monday file. Additional environment
variables other than the defaults in the Assigns file need to be set
when this option is applied. **Smkmerge** will prompt for a different
file for each day of the week, but the logical file names for Tuesday
through Friday can be defined as the same file when implementing the
MWSS approach.
:::
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  ------------------------------------------ -------------------- ---------------------------
  [Prev](ch06s13s03.html)                      [Up](ch06.html)        [Next](ch06s14s02.html)
  6.13.3. Files and Environment Variables     [Home](index.html)     6.14.2. Processing Order
  ------------------------------------------ -------------------- ---------------------------
:::
