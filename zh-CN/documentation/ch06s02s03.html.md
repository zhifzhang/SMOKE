::: {.navheader}
6.2.3. Files and Environment Variables
:::

[Prev](ch06s02s02.html) 

6.2. **Cntlmat**

 [Next](ch06s03.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#d0e22603}6.2.3. Files and Environment Variables {#files-and-environment-variables .title}

</div>

</div>
:::

::: {.toc}
[[6.2.3.1. Input Files](ch06s02s03.html#d0e22763)]{.section}

[[6.2.3.2. Input Environment
Variables](ch06s02s03.html#sect_programs_cntlmat_envar)]{.section}

[[6.2.3.3. Output Files](ch06s02s03.html#d0e22972)]{.section}
:::

::: {.figure}
[]{#fig_programs_cntlmat}

**Figure 6.2. Cntlmat input and output files**

::: {.mediaobject}
![Cntlmat input and output files](images\programs\cntlmat_html.jpg)
:::
:::

[Figure 6.2, "Cntlmat input and output
files"](ch06s02s03.html#fig_programs_cntlmat "Figure 6.2. Cntlmat input and output files")
shows the input and output files for the **Cntlmat** program. The input
files are the inventory file output from **Smkinven** (either
`AREA`{.envar}, `MOBL`{.envar}, or `PNTS`{.envar}), the control packets
file (`GCNTL`{.envar}), and the speciation profiles file
(`GSPRO`{.envar}) if there are reactivity controls (using the
/REACTIVITY/ packet).

If the `GCNTL`{.envar} file contains /MACT/, /CONTROL/ or
/EMS\_CONTROL/, /CTG/, and/or /ALLOWABLE/ packets, **Cntlmat** outputs a
multiplicative control matrix file (`ACMAT`{.envar}, `MCMAT`{.envar}, or
`PCMAT`{.envar}), a report of multiplicative controls (`ACREP`{.envar},
`MCREP`{.envar}, or `PCREP`{.envar}), and a report of all multiplicative
controls applied to the inventory (`ACSUMREP`{.envar},
`MCSUMREP`{.envar}, or `PCSUMREP`{.envar}). **Cntlmat** also outputs a
warning file (`ACTLWARN`{.envar}, `MCTLWARN`{.envar}, or
`PCTLWARN`{.envar}) regardless of which packets are used.

If the `GCNTL`{.envar} file contains a /PROJECTION/ packet, **Cntlmat**
outputs a growth matrix file (`APMAT`{.envar}, `MPMAT`{.envar}, or
`PPMAT`{.envar}) and a growth report (`APROJREP`{.envar},
`MPROJREP`{.envar}, or `PPROJREP`{.envar}).

If the `GCNTL`{.envar} file contains a /REACTIVITY/ packet, **Cntlmat**
outputs mole and mass-based reactivity matrix files (either
`ARMAT_L`{.envar} and `ARMAT_S`{.envar}, `MRMAT_L`{.envar} and
`MRMAT_S`{.envar}, or `PRMAT_L`{.envar} and `PRMAT_S`{.envar}), a
reactivity matrix supplement file (`ARSUP`{.envar}, `MRSUP`{.envar}, or
`PRSUP`{.envar}), and a report of reactivity controls
(`AREACREP`{.envar}, `MREACREP`{.envar}, or `PREACREP`{.envar}).
Finally, **Cntlmat** writes the `LOGFILE`{.envar} detailing the
program's execution.

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e22763}6.2.3.1. Input Files {#input-files .title}

</div>

</div>
:::

::: {.informaltable}
  File Name\*                  Format      Description
  ---------------------------- ----------- ---------------------------------------------------------------
  `[AREA|MOBL|PNTS]`{.envar}   SMOKE map   Intermediate inventory file produced by **Smkinven**
  `GCNTL`{.envar}              ASCII       Control packets file
  `GSPRO`{.envar} (optional)   ASCII       Speciation profiles file; only needed for reactivity controls
:::

\* As in [Figure 6.2, "Cntlmat input and output
files"](ch06s02s03.html#fig_programs_cntlmat "Figure 6.2. Cntlmat input and output files"),
the notation `[AREA|MOBL|PNTS]`{.envar} is used to indicate that only
one of the three files is used for a given run.

The physical file name of the input file `GCNTL`{.envar} file is
typically overridden by the environment that is running **Cntlmat**. For
example, when running SMOKE from scripts using the Assigns file, the
projection factor inputs are available as the `[A|M|P]PROJ`{.envar}
files. So, for instance, the script must set `GCNTL`{.envar} as
`APROJ`{.envar} (or area-source processing) after the Assigns file has
been invoked by the script, but before the **Cntlmat** program is
actually run.
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#sect_programs_cntlmat_envar}6.2.3.2. Input Environment Variables {#input-environment-variables .title}

</div>

</div>
:::

::: {.itemizedlist}
-   `COMPARE_REPLACE_CONTROL:`{.envar} \[default: Y\]

    Controls the way a replacement control is applied.

    ::: {.itemizedlist}
    -   Y: When set to Y, Cntlmat compares the overall percent
        reductions (CEFF \* RPEN \* REFF) from a replacement control in
        the CONTROL packet against existing percent reductions (either
        from the base inventory or from a just-applied /MACT/ packet).
        If the packet\'s reduction is more control (greater reduction)
        than the existing controls, then it is applied. Otherwise, it is
        not applied.

    -   N: When set to N, Cntlmat applies replacement controls even if
        the control is less control than an existing control, which may
        result in an increase in emissions
    :::

-   `FULLSCC_ONLY:`{.envar} \[default: N\]

    Disables any sub-SCC cross-reference assignments that would
    otherwise be included in the cross-reference hierarchy. For example,
    the left-7, left-4, and left-2 levels of nonpoint and mobile SCCs
    would never be used. This is useful when zeros are a natural part of
    the SCC that the user does not want to assume are present for
    cross-reference hierarchy purposes. This option affects all Cntlmat
    input packets that use SCC assignments as part of their hierarchy.

-   `PROJECTION_YR_SPEC:`{.envar} \[default: Y\]

    Sets whether or not entries in the /PROJECTION/ packet are in
    year-specific format.

    ::: {.itemizedlist}
    -   Y: Year-specific format in use

    -   N: Year-specific format not in use
    :::

-   `REACTIVITY_POL`{.envar}: \[default: VOC\]

    Sets the pollutant name to use in computing the reactivity matrix.

-   `REPORT_DEFAULTS`{.envar}: \[default: Y\]

    Defines whether or not the program reports when a source uses the
    default cross-reference.

    ::: {.itemizedlist}
    -   Y: List sources in the log file when they use default
        cross-reference

    -   N: Do not list sources that use the default cross-reference
    :::

-   `SMK_AVEDAY_YN`{.envar}: \[default: N\]

    Indicates whether or not to read average day emissions instead of
    annual emissions from the inventory file.

    ::: {.itemizedlist}
    -   Y: Read average day emissions

    -   N: Do not read average day emissions, use annual emissions
        instead
    :::

-   `SMK_SOURCE`{.envar}: \[default: blank\]

    Defines the type of sources to be processed. Valid values are

    ::: {.itemizedlist}
    -   A: Area processing

    -   B: Biogenic processing

    -   M: Mobile processing

    -   P: Point processing
    :::

-   `SMK_TMPDIR`{.envar}: \[default: "[.]{.quote}"\]

    Sets the path for writing the temporary files needed when processing
    the /ALLOWABLE/, /CONTROL/, /CTG/, /EMS\_CONTROL/, /MACT/, and/or
    /PROJECTION/ packets (from the `GCNTL`{.envar} file).

-   `SPEC_OUTPUT`{.envar}: \[default: ALL\]

    Defines the types of speciation outputs to create.

    ::: {.itemizedlist}
    -   MASS: Output speciation matrix based on mass

    -   MOLE: Output speciation matrix based on moles

    -   ALL: Output both mass and mole speciation matrices
    :::

-   `XREF_SICOVERSCC`{.envar}: \[default: Y\]

    Determines how to deal with packet entries that have both an SCC and
    SIC

    ::: {.itemizedlist}
    -   Y: Match sources by SIC before SCC

    -   N: Match sources by SCC before SIC
    :::
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e22972}6.2.3.3. Output Files {#output-files .title}

</div>

</div>
:::

::: {.informaltable}
  File Name\*                Format           Description
  -------------------------- ---------------- -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  `[A|M|P]CMAT`{.envar}      I/O API NetCDF   Multiplicative control matrix
  `[A|M|P]CREP`{.envar}      ASCII            Report of multiplicative controls applied to the inventory
  `[A|M|P]CREP2`{.envar}     ASCII            Detailed before-and-after report of application of the /CONTROL/ packet only, which includes any comments appended to the end of the /CONTROL/ packet entries. These comments can describe the controls being applied with each packet row. This report then includes the base and future overall percent reductions on a source-by-source basis, and includes the CONTROL packet line-specific comments.
  `[A|M|P]CSUMREP`{.envar}   ASCII            Report of all controls applied to the inventory, with all controls listed under each source
  `[A|M|P]CTLWARN`{.envar}   ASCII            List of warnings
  `[A|M|P]PMAT`{.envar}      I/O API NetCDF   Growth matrix
  `[A|M|P]PROJREP`{.envar}   ASCII            Report of growth factors applied to the inventory
  `[A|M|P]REACREP`{.envar}   ASCII            Report of reactivity controls applied to the inventory
  `[A|M|P]RMAT_L`{.envar}    I/O API NetCDF   Mole-based reactivity matrix
  `[A|M|P]RMAT_S`{.envar}    I/O API NetCDF   Mass-based reactivity matrix
  `[A|M|P]RSUP`{.envar}      ASCII            Reactivity matrix supplemental file
  `LOGFILE`{.envar}          ASCII            Log generated from executing **Cntlmat**
:::

\* As in [Figure 6.2, "Cntlmat input and output
files"](ch06s02s03.html#fig_programs_cntlmat "Figure 6.2. Cntlmat input and output files"),
the notation `[A|M|P]`{.envar} is used to indicate that only one of the
three files is output for a given run.
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  -------------------------- -------------------- -----------------------
  [Prev](ch06s02s02.html)     [Up](ch06s02.html)     [Next](ch06s03.html)
  6.2.2. Processing Order     [Home](index.html)       6.3. **Elevpoint**
  -------------------------- -------------------- -----------------------
:::
