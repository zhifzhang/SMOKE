::: {.navheader}
Chapter 12. Downloading, Installing, and Compiling SMOKE
:::

[Prev](ch11s02s04.html) 

 

 [Next](ch12s02.html)

------------------------------------------------------------------------

::: {.chapter lang="en"}
::: {.titlepage}
<div>

<div>

[]{#ch_installation}Chapter 12. Downloading, Installing, and Compiling SMOKE {#chapter-12.-downloading-installing-and-compiling-smoke .title}
----------------------------------------------------------------------------

</div>

</div>
:::

::: {.toc}
[[12.1. Introduction](ch12.html#d0e58202)]{.section}

[[12.2. Downloading SMOKE](ch12s02.html)]{.section}

[[12.3. Installing SMOKE](ch12s03.html)]{.section}

[[12.4. Compiling SMOKE for UNIX](ch12s04.html)]{.section}
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

[]{#d0e58202}12.1. Introduction {#introduction .title style="clear: both"}
-------------------------------

</div>

</div>
:::

Instructions on how to download and install SMOKE are provided in
[Section 12.2, "Downloading
SMOKE"](ch12s02.html "12.2. Downloading SMOKE") and [Section 12.3,
"Installing SMOKE"](ch12s03.html "12.3. Installing SMOKE").
[Section 12.4, "Compiling SMOKE for
UNIX"](ch12s04.html "12.4. Compiling SMOKE for UNIX") describes how to
compile SMOKE for UNIX platforms other than those supported by CMAS. The
SMOKE compile scripts are configured to use a Linux C-shell environment,
and are not designed for Windows or Mac operating systems. Using SMOKE
on operating systems other than Linux is not supported by CMAS. If your
operating system is one of the types supported by CMAS, you need only to
download the SMOKE executables available from the [CMAS Model
Clearinghouse](http://www.cmascenter.org/html/models.html).

**IMPORTANT**: Most SMOKE applications will use the pre-compiled Linux
binaries. You only need to compile SMOKE for developing new
functionality, debugging the source code, or porting the software to
operating systems other than Linux.
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  -------------------------- -------------------- --------------------------
  [Prev](ch11s02s04.html)                               [Next](ch12s02.html)
  11.2.4. SMOKE               [Home](index.html)     12.2. Downloading SMOKE
  -------------------------- -------------------- --------------------------
:::
::: {.navheader}
12.2. Downloading SMOKE
:::

[Prev](ch12.html) 

Chapter 12. Downloading, Installing, and Compiling SMOKE

 [Next](ch12s03.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

[]{#sect_install_download}12.2. Downloading SMOKE {#downloading-smoke .title style="clear: both"}
-------------------------------------------------

</div>

</div>
:::

Steps for downloading SMOKE:

::: {.orderedlist}
1.  Go to the [CMAS Model
    Clearinghouse](http://www.cmascenter.org/html/models.html).

2.  Click on the SMOKE link in the list of CMAS-supported products.

3.  If you have already registered with CMAS, enter your email address
    and password. Otherwise, click the \"Register now\" link and
    complete the registration form.

4.  You will be sent to the CMAS Download Center. Select SMOKE as the
    product you wish to download and select your computer and compiler
    type.

5.  Download the installation script (`smoke_install.csh`{.filename}),
    the source code, scripts, and executables archive
    (`smoke_${version}.Linux2_x86_64pg.tar.gz`{.filename}), and the test
    case data files
    (`smoke_${version}.nctox.MOVES.data.tar.gz`{.filename}). Save these
    files in the same directory on your machine.
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  ----------------------------------------------------------- -------------------- -------------------------
  [Prev](ch12.html)                                             [Up](ch12.html)         [Next](ch12s03.html)
  Chapter 12. Downloading, Installing, and Compiling SMOKE     [Home](index.html)     12.3. Installing SMOKE
  ----------------------------------------------------------- -------------------- -------------------------
:::
::: {.navheader}
12.3. Installing SMOKE
:::

[Prev](ch12s02.html) 

Chapter 12. Downloading, Installing, and Compiling SMOKE

 [Next](ch12s04.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

[]{#sect_install_install}12.3. Installing SMOKE {#installing-smoke .title style="clear: both"}
-----------------------------------------------

</div>

</div>
:::

Steps for installing SMOKE:

::: {.orderedlist}
1.  Make sure that the three files you downloaded from the CMAS website
    are in the same directory.

2.  Choose the directory where you want to install SMOKE and the data
    files. This directory will be known as your `SMK_HOME`{.filename}
    directory.

3.  At the command line, type:

    **`setenv SMK_HOME`
    *`<your selected directory for SMOKE installation>`***

    [**NOTE:**]{.bold} the SMOKE scripts are designed to run under the
    UNIX C-shell (either **csh** or **tcsh**); the scripts will not work
    with other shells such as **bash**.

4.  Make sure your `SMK_HOME`{.filename} directory exists by typing the
    following command on the command line:

    **`mkdir -p $SMK_HOME`**

5.  Go to the directory when you have saved the SMOKE installation
    files.

6.  Type the following at the command line:

    **`source smoke_install.csh`**

    This command will unzip and install the SMOKE files in your
    `SMK_HOME`{.filename} directory. If the script encounters any
    problems, it will print an error message to point you to the
    problem.
:::

The `SMK_HOME`{.envar} setting is needed by the SMOKE scripts.
Therefore, it is best to always have this setting defined when you log
into your computer. To do this, perform the following additional steps
before proceeding:

::: {.orderedlist}
7.  Go to your home directory, then use a text editor to view the
    `.cshrc`{.filename} file (note that this file is a hidden file,
    which can be listed in UNIX using the **ls -a** command at the
    prompt).

8.  In the `.cshrc`{.filename} file, add the following line:

    **`setenv SMK_HOME`
    *`<your selected directory for SMOKE installation>`***

9.  Save and close the `.cshrc`{.filename} file. Your
    `SMK_HOME`{.filename} directory will now be defined automatically
    when you log into the computer or when you open a new **xterm**
    window.
:::

Now you are ready to run the SMOKE nctox case. Running SMOKE is
described in [Chapter 4, *How to Use
SMOKE*](ch04.html "Chapter 4. How to Use SMOKE"), which discusses using
the SMOKE scripts. Please refer to [Section 4.3, "Running the SMOKE test
case"](ch04s03.html "4.3. Running the SMOKE test case") for instructions
on running the example scripts for the nctox case. The current SMOKE
documentation can be found online at <http://www.smoke-model.org>.
:::

::: {.navfooter}

------------------------------------------------------------------------

  -------------------------- -------------------- ---------------------------------
  [Prev](ch12s02.html)         [Up](ch12.html)                 [Next](ch12s04.html)
  12.2. Downloading SMOKE     [Home](index.html)     12.4. Compiling SMOKE for UNIX
  -------------------------- -------------------- ---------------------------------
:::
::: {.navheader}
12.4. Compiling SMOKE for UNIX
:::

[Prev](ch12s03.html) 

Chapter 12. Downloading, Installing, and Compiling SMOKE

 [Next](go01.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

[]{#sect_install_compile}12.4. Compiling SMOKE for UNIX {#compiling-smoke-for-unix .title style="clear: both"}
-------------------------------------------------------

</div>

</div>
:::

Unless you are planning to modify the SMOKE source codes, DO NOT try to
compile the codes; use the precompiled binary Linux executables provided
by the CMAS Center. Also, if the precompiled executables are not
compatible with your OS platform, you will need to compile SMOKE for
your system. The SMOKE compile scripts are configured to use a Linux
C-shell environment, and are not designed for Windows or Mac operating
systems. Using SMOKE on operating systems other than Linux is not
supported by CMAS. The following steps will help get you set up to
compile SMOKE.

::: {.itemizedlist}
-   Install SMOKE as described in [Section 12.3, "Installing
    SMOKE"](ch12s03.html "12.3. Installing SMOKE").

-   Download and compile the I/O API library from the [I/O API home
    page](https://www.cmascenter.org/ioapi/). The I/O API can be
    installed in `$SMK_HOME`{.filename}/subsys/ioapi

    \[1\] Create symbolic link to the IOAPI source code directory
    (ioapi) to the `$SMK_HOME`{.filename}/subsys/ioapi/ioapi/ directory.

    \[2\] Create symbolic link to the IOAPI `libioapi.a`{.filename}
    library file and utility programs
    (`datshift, jul2greg, greg2jul and so on`{.filename}) to the
    `$SMK_HOME`{.filename}/subsys/ioapi/Linux2\_x86\_64ifort/ directory.

-   After the appropriate libraries and compile options have been
    installed, you can source an Assigns file to ensure that your system
    is configured properly.

    **`cd $SMK_HOME`/subsys/smoke/assigns**

    **`source ASSIGNS.nctox.cmaq.cb05_soa.us12-nc`**

-   You should now be ready to compile the SMOKE programs. Change
    directories to `$SMKOOT`{.filename}/src/.

-   At the UNIX prompt, type:

    **`make`**

-   After running the `Makeall`{.filename} script, you should check the
    `$SMK_BIN`{.envar} directory to check the executables.

-   Once you have compiled the SMOKE programs, you can run the SMOKE
    example scripts following the instructions in [Section 4.3, "Running
    the SMOKE test
    case"](ch04s03.html "4.3. Running the SMOKE test case").
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  ------------------------- -------------------- -----------------------
  [Prev](ch12s03.html)        [Up](ch12.html)          [Next](go01.html)
  12.3. Installing SMOKE     [Home](index.html)     Appendix A. Glossary
  ------------------------- -------------------- -----------------------
:::
