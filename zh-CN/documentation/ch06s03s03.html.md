::: {.navheader}
6.3.3. Files and Environment Variables
:::

[Prev](ch06s03s02.html) 

6.3. **Elevpoint**

 [Next](ch06s04.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#d0e23412}6.3.3. Files and Environment Variables {#files-and-environment-variables .title}

</div>

</div>
:::

::: {.toc}
[[6.3.3.1. Input Files](ch06s03s03.html#d0e23474)]{.section}

[[6.3.3.2. Input Environment
Variables](ch06s03s03.html#sect_programs_elevpoint_envar)]{.section}

[[6.3.3.3. Output Files](ch06s03s03.html#d0e23789)]{.section}
:::

::: {.figure}
[]{#fig_programs_elevpoint}

**Figure 6.3. Elevpoint input and output files**

::: {.mediaobject}
![Elevpoint input and output files](images\programs\elevpoint_html.jpg)
:::
:::

[Figure 6.3, "Elevpoint input and output
files"](ch06s03s03.html#fig_programs_elevpoint "Figure 6.3. Elevpoint input and output files")
shows the input and output files for the **Elevpoint** program. The
input files are the grid description file (`GRIDDESC`{.envar}), an
elevated source configuration file (`PELVCONFIG`{.envar}), the
point-source inventory file output from **Smkinven** (`PNTS`{.envar}),
and, if the `PELVCONFIG`{.envar} file selects sources by emissions value
or rank, either a list of hourly emissions files output by **Temporal**
(`PTMPLIST`{.envar}) or an individual hourly emissions file
(`PTMP`{.envar}).

**Elevpoint** outputs a log file (`LOGFILE`{.envar}), an elevated point
source identification file (`PELV`{.envar}), an elevated and PinG source
report (`REPPELV`{.envar}), and a stack parameters file
(`STACK_GROUPS`{.envar}) if the `PELVCONFIG`{.envar} file is configured
to select stack groups.

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e23474}6.3.3.1. Input Files {#input-files .title}

</div>

</div>
:::

::: {.informaltable}
  File Name                       Format      Description
  ------------------------------- ----------- --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  `GRIDDESC`{.envar}              ASCII       Description of the modeling grid
  `PELVCONFIG`{.envar}            ASCII       Elevated source configuration file
  `PNTS`{.envar}                  SMOKE map   Intermediate inventory file produced by **Smkinven**
  `PTMP`{.envar} (optional)       ASCII       Hourly emissions file produced by **Temporal**; needed only when `PELVCONFIG`{.envar} specifies emissions as one of the selection or grouping criteria and not using the `PTMPLIST`{.envar} file
  `PTMPLIST`{.envar} (optional)   ASCII       List of hourly emissions files produced by **Temporal**; needed only when `PELVCONFIG`{.envar} specifies emissions as one of the selection or grouping criteria
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#sect_programs_elevpoint_envar}6.3.3.2. Input Environment Variables {#input-environment-variables .title}

</div>

</div>
:::

::: {.itemizedlist}
-   `ELEV_WRITE_FAKE_SRC`{.envar}: \[default: Y\]

    Defines whether the program needs to add a fake source group or not
    when there is no an elevated source group to output.

    ::: {.itemizedlist}
    -   Y: Add a fake source group when there is no an elevated source
        group to output

    -   N: Do not add a fake source group.
    :::

-   `ELEV_WRITE_LATLON`{.envar}: \[default: Y\]

    Defines whether write the latitude and longitude information of
    special elevated or PinG sources to the stack groups file
    [Section 9.3.2,
    "`STACK_GROUPS`{.envar}"](ch09s03s02.html "9.3.2. STACK_GROUPS") for
    air quality models CMAQ, and UAM-style.

    ::: {.itemizedlist}
    -   Y: Write the latitude and longitude information of elevated or
        PinG sources to the the stack group file.

    -   N: Do not write the latitude and longitude information of
        elevated or PinG sources to the the stack group file.
    :::

    The ELEV\_WRITE\_LATLON can not be N, when processing for PinG
    sources, since CMAQ does need the latitude and longitude to be
    included.

-   `G_RUNLEN`{.envar}: \[default: 240000\]

    Simulation length (HHMMSS)

-   `G_STDATE`{.envar}: \[default: 0\]

    Starting date of simulation (YYYYDDD)

-   `G_STTIME`{.envar}: \[default: 0\]

    Starting time of simulation (HHMMSS)

-   `G_TSTEP`{.envar}: \[default: 10000\]

    Time step (HHMMSS), only 10000 is allowed

-   `IOAPI_ISPH`{.envar}: \[default: 19\]

    Determines which USGS spheroid to use for grid-based calculations

    ::: {.itemizedlist}
    -   0: Clarke 1866
    -   1: Clarke 1880
    -   2: Bessel
    -   3: New International 1967
    -   4: International 1909
    -   5: WGS 72
    -   6: Everest
    -   7: WGS 66
    -   8: GRS 1980
    -   9: Airy
    -   10: Modified Everest
    -   11: Modified Airy
    -   12: WGS 84
    -   13: Southeast Asia
    -   14: Australian National
    -   15: Krassovsky
    -   16: Hough
    -   17: Mercury 1960
    -   18: Modified Mercury 1968
    -   19: Normal Sphere
    :::

    This environment variable can also be used to set custom spheroid
    representations. See the [I/O API
    documentation](http://www.baronams.com/products/ioapi/SETSPHERE.html)
    for more information.

-   `SMK_ELEV_METHOD`{.envar}: \[default: 0\]

    Defines the method to use in SMOKE for determining and processing
    elevated point sources. The setting chosen depends on the model
    output format needed from SMOKE. All PinG sources determined based
    on `SMK_PING_METHOD`{.envar} will automatically be considered
    elevated sources (as defined specifically for the model for which
    you are creating emissions).

    ::: {.itemizedlist}
    -   0: Treat all sources as potentially elevated, and let the
        **Laypoint** program determine which sources are elevated and
        which are not. This approach is appropriate only for SMOKE
        output for the CMAQ model.

    -   1: Use the "[Elevated]{.quote}" section of the
        `PELVCONFIG`{.envar} configuration file to select specific
        sources. This approach can be used for any of the model output
        formats - CMAQ and UAM-style.

        For UAM-style emissions processing, this environment variable
        must be set to 1 and the `PELVCONFIG`{.envar} file will be used
        to select specific sources. This method of processing is needed
        for UAM and CAM~X~ because they require use of the cutoff method
        discussed earlier. In rare cases of a very small inventory, it
        might be acceptable to specify 0 for this setting in UAM-style
        emissions processing, provided that you are sure that treating
        all sources as elevated sources in UAM-style models is
        acceptable. We do not recommend such an approach for typical
        SMOKE applications for UAM-style models.

    -   2: Use the "[Elevated]{.quote}" section of the
        `PELVCONFIG`{.envar} configuration file to select specific
        sources. This approach can be used for in-line plume rise in
        CMAQ. Must set `SMK_PING_METHOD`{.envar} = 0.

        For in-line plume rise processing in CMAQ, this environment
        variable must be set to 2 and the `PELVCONFIG`{.envar} file will
        be used to select specific sources. To reduce the total number
        of plume rise calculations that would be done in the CMAQ
        in-line plume rise module, **Elevpoint** needs to group sources
        with nearly identical stack parameters. **Elevpoint** outputs
        stack group file that identifies elevated source locations and
        stack parameters for in-line plume rise calculation in CMAQ. See
        [Section 4.4.18, "In-line Plume Rise Calculation in CMAQ model
        (as of version
        4.7)"](ch04s04s18.html "4.4.18. In-line Plume Rise Calculation in CMAQ model (as of version 4.7)")
        for more detail.

        When using **Smkmerge** for in-line plume rise processing,
        `MRG_LAYERS_YN`{.envar} must set to N to create hourly speciated
        2-D surface layer emissions file. If
        `SMKMERGE_CUSTOM_OUTPUT`{.envar} is set to Y, the output file
        for the in-line emissions is called `INLNST_L`{.envar}.

        To process point fire emission (ptfire sector) without
        precomputed plume rise described in described in
        [Section 4.4.2.5, "Day-specific and hour-specific point and fire
        inventories"](ch04s04s02.html#sect_scripts_hour_day_invs "4.4.2.5. Day-specific and hour-specific point and fire inventories").
    :::

-   `SMK_PING_METHOD`{.envar}: \[default: 0\]

    Defines the method to use in determining PinG point sources.

    ::: {.itemizedlist}
    -   0: No PinG sources

    -   1: Use PinG section of `PELVCONFIG`{.envar} configuration file
    :::

    For all models that SMOKE supports use of PinG sources is optional.
    Some models may have limitations on the number of PinG sources
    supported, and you must make sure that these limitations are met;
    SMOKE does not automatically compare with these limitations, if any.

    For CMAQ, SMOKE will output a `STACK_GROUPS`{.envar} file from the
    **Elevpoint** program and a `PINGTS_[S|L]`{.envar} file from the
    **Smkmerge** program to support PinG. For UAM-style processing,
    SMOKE will flag PinG sources in the ASCII elevated file created by
    **Smkmerge**, and should be used with the `SMK_ASCIIELEV_YN`{.envar}
    option set to Y to create this ASCII elevated file.

-   `SMK_SOURCE`{.envar}: See description in [Section 6.2.3.2, "Input
    Environment
    Variables"](ch06s02s03.html#sect_programs_cntlmat_envar "6.2.3.2. Input Environment Variables")
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e23789}6.3.3.3. Output Files {#output-files .title}

</div>

</div>
:::

::: {.informaltable}
  File Name                Format           Description
  ------------------------ ---------------- -------------------------------------------------------------------------------------------------------------------------------
  `LOGFILE`{.envar}        ASCII            Log generated from executing **Elevpoint**
  `PELV`{.envar}           ASCII            Elevated point source identification file
  `REPPELV`{.envar}        ASCII            Reports the sources selected as elevated and PinG, plus other information about the sources, including why they were selected
  `STACK_GROUPS`{.envar}   I/O API NetCDF   PinG and/or elevated sources stack parameters file
:::
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  -------------------------- -------------------- -----------------------
  [Prev](ch06s03s02.html)     [Up](ch06s03.html)     [Next](ch06s04.html)
  6.3.2. Processing Order     [Home](index.html)          6.4. **Grdmat**
  -------------------------- -------------------- -----------------------
:::
