::: {.navheader}
5.2.2. MOVES Driver Scripts
:::

[Prev](ch05s02.html) 

5.2. MOVES Utility Scripts

 [Next](ch05s02s03.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#section_moves_driver_script}5.2.2. MOVES Driver Scripts {#moves-driver-scripts .title}

</div>

</div>
:::

::: {.toc}
[[5.2.2.1. Processing Order](ch05s02s02.html#d0e17486)]{.section}

[[5.2.2.2. How-To-Run](ch05s02s02.html#d0e17553)]{.section}

[[5.2.2.3. Files and Environment
Variables](ch05s02s02.html#d0e17564)]{.section}
:::

The MOVES Runspec script **Runspec\_generator.pl** is written in Perl,
generates the scripts and inputs needed to run MOVES for each
representative county. The MOVES Model can be run at any of the three
domains/scales: national, county or project. The
**Runspec\_generator.pl** is only applicable to the county-level because
this level of model detail is required by EPA for SIP and conformity
analyses. For this scale, MOVES requires a MySQL input database
containing local data for a single county. The **Runspec\_generator.pl**
is designed to prepare the MOVES importer and MOVES run scripts so that
the fewest number of runs will produce all of the necessary emissions
factors. In this approach, user can specify one or more groups of
pollutants to model in the run control fil.

There are a total of four types of modeling pollutant groups: 1) Ozone
precursors, 2) Toxics, 3) Particulate Matters, and 4) GreenHouse Gases
(GHG) based on [Table 2.8, "MOVES Pollutant
Groups"](ch02s08s04.html#tbl_concepts_moves_pollutant_groups "Table 2.8. MOVES Pollutant Groups").
The choice of pollutant group(s) determines what pollutants are included
in the three emission rate lookup tables (RPD, RPV, and RPP) by MOVES.

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e17486}5.2.2.1. Processing Order {#processing-order .title}

</div>

</div>
:::

**Runspec\_generator.pl** run after **Met4moves**. It assembles the
instructions for MOVES to create MySQL input databases from XML files
and creates the importer.csh scripts and assembles run specification XML
files to run MOVES for a necessary range of conditions (for each
emissions process: rate-per-distance, rate-per-vehicle, and
rate-per-profile) based on the **Met4moves** output temperature list by
county-specific runspec.csh.

The **Runspec\_generator.pl** uses following steps:

::: {.orderedlist}
1.  Reads the representative county min/max temperature and 24-hours
    temperature profiles output file from **Met4moves** for RPP mode.
    Find detail information from [Section 9.8.1,
    "`MOVES_OUTFILE`{.envar}"](ch09s08.html#sect_intmed_moves_output "9.8.1. MOVES_OUTFILE")

2.  Reads the representative county specific min/max temperatures and
    average RH output file from **Met4moves** for RPD, RPV and RPH
    modes. Find detail information from [Section 9.8.2,
    "`MOVES_RH_OUTFILE`{.envar}"](ch09s08s02.html "9.8.2. MOVES_RH_OUTFILE")

3.  Import the name of pollutant group to model from the run control
    file
    ([contorl.in](ch08s09s02.html#sect_input_runctlfile "8.9.2.2.1. Run Control File for MOVES Driver Script"))
    based on [Table 2.8, "MOVES Pollutant
    Groups"](ch02s08s04.html#tbl_concepts_moves_pollutant_groups "Table 2.8. MOVES Pollutant Groups")

4.  Reads the run control file
    ([control.in](ch08s09s02.html#sect_input_runctlfile "8.9.2.2.1. Run Control File for MOVES Driver Script"))
    and representative county file
    ([countyrep.in](ch08s09s02.html#sect_input_refcountyfile "8.9.2.2.2. Representative County File for MOVES Driver Script"))
    created by user.

5.  Assembles instructions for MOVES to create MySQL input databases
    from XML files (data importer).

6.  Assembles runspec XML files to run MOVES for a wide range of
    conditions.

7.  Generates the run-specific temperature and humidity
    comma-separated-values (CSV) format file.

8.  Assembles a batch list of data importer files, runspec files, and
    also a list of the MySQL output database names to be postprocessed.

9.  importer.csh and runspec.csh scripts are used to create the on-road
    operating rateperdistance table (RPD), off-network processes
    ratepervehicle table (RPV), and vapor venting off-network
    rateperprofile table (RPP).

10. Review log file of the MOVES, called runlog\_\*.txt.
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e17553}5.2.2.2. How-To-Run {#how-to-run .title}

</div>

</div>
:::

Check out the most latest processing scripts and the "[How to
run]{.quote}" instructions are available from [the SMOKE-MOVES Github
repository](https://github.com/CEMPD/SMOKE-MOVES/).
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e17564}5.2.2.3. Files and Environment Variables {#files-and-environment-variables .title}

</div>

</div>
:::

::: {.toc}
[[5.2.2.3.1. Input Files](ch05s02s02.html#d0e17567)]{.section}

[[5.2.2.3.2. Output
Files](ch05s02s02.html#section_moves_driver_script_output)]{.section}
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#d0e17567}5.2.2.3.1. Input Files {#input-files .title}

</div>

</div>
:::

::: {.table}
[]{#tbl_smoke_moves_utility_script}

**Table 5.1. Input Files**

  File Name                                                                                                                                                 Format   Description
  --------------------------------------------------------------------------------------------------------------------------------------------------------- -------- ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  [countyrep.in](ch08s09s02.html#sect_input_refcountyfile "8.9.2.2.2. Representative County File for MOVES Driver Script")                                  ASCII    Representative county file containing the county/state/country FIPS codes and the full path and file names for the files containing MOVES data for AGE, FUELSUPPLY, FUELFORM(optional), IM, POP, SourceType, HPMSVMT, VMT for each representative county
  [control.in](ch08s09s02.html#sect_input_runctlfile "8.9.2.2.1. Run Control File for MOVES Driver Script")                                                 ASCII    Run control file that user specifies fields for the Database Host, Project Name, Model year, day type (weekday or weekend), pollutant and the met4moves MET output file for the batch run of MOVES
  [MOVES\_OUTFILE](ch09s08.html#sect_intmed_moves_output "9.8.1. MOVES_OUTFILE")                                                                            ASCII    **Met4moves** output for each fuel month for the MOVES Driver script (minimum and maximum temperatures, and 24-hour temperature profiles for all representative counties by temperature bin)
  [MOVES\_RH\_OUTFILE](ch09s08s02.html "9.8.2. MOVES_RH_OUTFILE")                                                                                           ASCII    **Met4moves** outputs fuel month-specific averaged, min, and max temperatures and averaged RH values in local time for all representative counties by temperature bin
  [sourceTypeAgeDistribution](ch08s09s02.html#sect_input_sourceTypeAgeDist "8.9.2.2.3. Age Distribution File for Representative County for MOVES model")    ASCII    Age distribution by source type over 30 vehicle model years
  [fuelSupply](ch08s09s02.html#sect_input_fuelsupply "8.9.2.2.4. Fuel Supply file for MOVES model")                                                         ASCII    list directed file used to define the fuel properties, their market shares and the months that the fuels are used for each representative county
  [fuelformulation (optional)](ch08s09s02.html#sect_input_fuelformulation "8.9.2.2.5. Fuel Formulation file for MOVES model (optional)")                    ASCII    list directed file used to define the fuel supply and the months that the fuels are used for each representative counties
  [IMCoverage](ch08s09s02.html#sect_input_IMcoverage "8.9.2.2.7. IM Coverage file for MOVES Model")                                                         ASCII    list directed file used to define the inspection and maintanance data available for each representative counties
  [sourcetypeyear](ch08s09s02.html#sect_input_sourcetypeyear "8.9.2.2.8. MOVES Vehicle Population by source type input file for MOVES model")               ASCII    Vehicle population by MOVES source type
  [HPMSVTypeYear](ch08s09s02.html#sect_input_HPMSVTypeYear "8.9.2.2.6. HPMSV Type for MOVES model")                                                         ASCII    list directed file used to define the annual VMT by Highway Performance Monitoring System (HPMS) vehicle type
  [dummy\_avgspeeddistribution](ch08s09s02.html#sect_input_dummy_avgspeeddistribution "8.9.2.2.9. Dummy Average Speed Distribution file for MOVES model")   ASCII    Speed distribution by roadway type and vehicle class. MOVES dummy inputs files provided with tool package in OUTDIR directory
  [dummy\_monthvmtfraction](ch08s09s02.html#sect_input_dummy_monthvmtfraction "8.9.2.2.12. Dummy Month VMT Fraction file for MOVES model")                  ASCII    list directed file that allocates annual VMT to the individual months
  [dummy\_dayvmtfraction](ch08s09s02.html#sect_input_dummy_dayvmtfraction "8.9.2.2.10. Dummy Day VMT Fraction file for MOVES model")                        ASCII    file that allocates month VMT day type, weekday or weekend and the decimal fraction of the proportion of vehicle miles travelled for the weekday or weekend day type
  [dummy\_hourvmtfraction](ch08s09s02.html#sect_input_dummy_hourvmtfraction "8.9.2.2.11. Dummy Hour VMT Fraction file for MOVES model")                     ASCII    list directed file that allocates the day-type VMT to individual hours of the day
  [dummy\_roadtypedistribution](ch08s09s02.html#sect_input_dummy_roadtypedistribution "8.9.2.2.13. Dummy Road Type Distribution file for MOVES model")      ASCII    list directed file that allocates annual VMT to five MOVES roadway types
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#section_moves_driver_script_output}5.2.2.3.2. Output Files {#output-files .title}

</div>

</div>
:::

::: {.informaltable}
+-----------------------------+--------+-----------------------------+
| File Name                   | Format | Description                 |
+=============================+========+=============================+
| [runspec.csh](c             | ASCII  | Batch or c-shell script to  |
| h05s02s03.html#section_move |        | run required MOVES runs.    |
| s_runspec_batch "5.2.3.3. M |        | Fine more information from  |
| OVES Runspec batch script") |        | [Section 5.2.3.3, "MOVES    |
|                             |        | Runspec batch               |
|                             |        | script"](c                  |
|                             |        | h05s02s03.html#section_move |
|                             |        | s_runspec_batch "5.2.3.3. M |
|                             |        | OVES Runspec batch script") |
+-----------------------------+--------+-----------------------------+
| [impor                      | ASCII  | Batch or c-shell Script to  |
| ter.csh](ch05s02s03.html#se |        | create MySQL MOVES          |
| ction_moves_importer "5.2.3 |        | databases and import the    |
| .2. MOVES importer script") |        | data. Fine more information |
|                             |        | from [Section 5.2.3.2,      |
|                             |        | "MOVES importer             |
|                             |        | script"](ch05s02s03.html#se |
|                             |        | ction_moves_importer "5.2.3 |
|                             |        | .2. MOVES importer script") |
+-----------------------------+--------+-----------------------------+
| InputDBlist                 | ASCII  | List of MySQL database      |
|                             |        | names to process. It will   |
|                             |        | be used as an input to      |
|                             |        | MOVES Post-processing       |
|                             |        | script. See example below:  |
|                             |        |                             |
|                             |        | ``` {.programlisting}       |
|                             |        | localhost                   |
|                             |        | /work/MOVES_Proc            |
|                             |        | essing_Scripts/post_process |
|                             |        | 13121_2008_1                |
|                             |        | ```                         |
+-----------------------------+--------+-----------------------------+
| Data importer files         | ASCII  | data importer files         |
|                             |        | (\*\_imp.xml)               |
+-----------------------------+--------+-----------------------------+
| Runspec files               | ASCII  | runspec files (\*\_mrs.xml) |
+-----------------------------+--------+-----------------------------+
| zonemonthhour files         | ASCII  | MOVES-formatted             |
|                             |        | zonemonthhour (\*\_zmh.csv) |
|                             |        | contains temperature and RH |
|                             |        | data from the Met4Moves     |
|                             |        | Meteorological processor.   |
|                             |        | Relative Humidity is a      |
|                             |        | single value averaged over  |
|                             |        | the time period selected by |
|                             |        | the user in Met4Moves and   |
|                             |        | averaged over the entire    |
|                             |        | group of inventory counties |
|                             |        | that map to a               |
|                             |        | representative county.      |
+-----------------------------+--------+-----------------------------+
:::
:::
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  ----------------------------- -------------------- --------------------------
  [Prev](ch05s02.html)           [Up](ch05s02.html)     [Next](ch05s02s03.html)
  5.2. MOVES Utility Scripts     [Home](index.html)      5.2.3. Run MOVES Model
  ----------------------------- -------------------- --------------------------
:::
