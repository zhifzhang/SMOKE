::: {.navheader}
6.8.3. Files and Environment Variables
:::

[Prev](ch06s08s02.html) 

6.8. **Movesmrg**

 [Next](ch06s09.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#d0e25636}6.8.3. Files and Environment Variables {#files-and-environment-variables .title}

</div>

</div>
:::

::: {.toc}
[[6.8.3.1. Input Files](ch06s08s03.html#d0e25763)]{.section}

[[6.8.3.2. Input Environment
Variables](ch06s08s03.html#d0e25952)]{.section}

[[6.8.3.3. Output Files](ch06s08s03.html#d0e26402)]{.section}
:::

::: {.figure}
[]{#fig_programs_movesmrg_mobile}

**Figure 6.8. Movesmrg input and output files**

::: {.mediaobject}
![Movesmrg input and output
files](images\programs\movesmrg_mobile_html.jpg)
:::
:::

[Figure 6.8, "Movesmrg input and output
files"](ch06s08s03.html#fig_programs_movesmrg_mobile "Figure 6.8. Movesmrg input and output files")
shows the input and output files for the **Movesmrg** program. The input
files are the country, state, and county codes file (`COSTCY`{.envar}),
the grid description file (`GRIDDESC`{.envar}), the inventory data table
(`INVTABLE`{.envar}), the representative county fuel month file
(`MFMREF`{.envar}), the list of emission process and associated
pollutants file (`MEPROC`{.envar}), the representative county
cross-reference file (`MCXREF`{.envar}), the list of emission factors
files by representative county file (`MRCLIST`{.envar}), the meteorology
files (`MET_CRO_2D`{.envar}), the gridding matrix from **Grdmat**
(`MGMAT`{.envar}), the inventory file output from **Smkinven**
(`MOBL`{.envar}), the speciation matrix from **Spcmat**
(`MSMAT_L`{.envar} or `MSMAT_S`{.envar}), the **Met4moves** output file
for SMOKE (`METMOVES`{.envar}
[`=SMOKE_OUTFILE)`{.envar}](ch09s08s03.html "9.8.3. SMOKE_OUTFILE(=METMOVES)"),
the MOVES-based lookup tables (RPD, RPV, and RPP), and the daily hour
VMT files from **Temporal** (`MTMP_(day)`{.envar}). Note that
`MET_CRO_2D`{.envar}, `METMOVES`{.envar}, and `MTMP_(day)`{.envar} are
optional files that are included only in certain situations.

**Movesmrg** outputs a model-ready emissions file `MGTS_L`{.envar} or
`MGTS_S`{.envar}, a report file `REPMGTS_S`{.envar}, and a log file
`LOGFILE`{.envar}.

When using source apportionment (see [Section 4.4.23, "Generating
CMAQ-ready Source Apportionment Input Data
Files"](ch04s04s23.html "4.4.23. Generating CMAQ-ready Source Apportionment Input Data Files")),
**Movesmrg** will also read the source grouping file
(`SOURCE_GROUPS`{.envar}) and output the source group information
`SRCGROUPS_OUT`{.envar}, the emissions for each source group
`SGINLNTS_L`{.envar} or `SGINLNTS_S`{.envar}, and a source group report
file `SRCGRP_REPORT`{.envar}.

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e25763}6.8.3.1. Input Files {#input-files .title}

</div>

</div>
:::

::: {.informaltable}
  File Name                                                                                                                                    Format   Description
  -------------------------------------------------------------------------------------------------------------------------------------------- -------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  `COSTCY`{.envar}                                                                                                                             ASCII    Country, state and county codes file
  [`GEOCODE_LEVEL[1-4]`{.envar}](ch08s10s03.html "8.10.3. GEOCODE_LEVEL[1-4]: Geographical Input Files")                                       ASCII    Geographical level codes and descriptions for gridded inventories, only when USE\_EXP\_GEO\_CODES is set to Y, (COSTCY is ignored when [`GEOCODE_LEVEL[1-4]`{.envar}](ch08s10s03.html "8.10.3. GEOCODE_LEVEL[1-4]: Geographical Input Files") files are used)
  [`CFPRO`{.envar}](ch08s09s02.html#sect_input_cfpro "8.9.2.1.2. CFPRO: Mobile source control factor input file") (optional)                   ASCII    Control factor file
  `GRIDDESC`{.envar}                                                                                                                           ASCII    Grid description file
  `INVTABLE`{.envar}                                                                                                                           ASCII    Inventory data table
  `MFMREF`{.envar}                                                                                                                             ASCII    Representative county fuel month file
  `MEPROC`{.envar}                                                                                                                             ASCII    List of emission process and associated pollutants file
  `MCXREF`{.envar}                                                                                                                             ASCII    Representative county cross-reference file
  `MRCLIST`{.envar}                                                                                                                            ASCII    List of emission factors files (i.e., RPD, RPV and RPP Lookup tables) by representative county file
  `METLIST`{.envar}                                                                                                                            ASCII    List of MCIP meteorology files
  `MGMAT`{.envar}                                                                                                                              ASCII    Gridding matrix from **Grdmat**
  `MOBL`{.envar}                                                                                                                               ASCII    Inventory file output from **Smkinven**
  `MSMAT_[L|S]`{.envar}                                                                                                                        ASCII    Speciation matrix from **Spcmat**
  `METMOVES`{.envar} ([`=SMOKE_OUTFILE)`{.envar}](ch09s08s03.html "9.8.3. SMOKE_OUTFILE(=METMOVES)") (optional)                                ASCII    Meteorology file from **Met4moves**
  `MTMP_{day}`{.envar}                                                                                                                         ASCII    Daily hour VMT files from **Temporal**
  [`SOURCE_GROUPS`{.envar}](ch08s10s13.html "8.10.13. SOURCE_GROUPS: Source apportionment groups") (optional)                                  ASCII    Source apportionment groups
  [`SPDIST`{.envar}](ch08s09s02.html#sect_input_spdist "8.9.2.1.7. SPDIST: Mobile average speed distribution profile input file") (optional)   ASCII    Weekday and weekend hour-specific 16-bins average speed distribution profiles
  [`SPDPRO`{.envar}](ch08s09s02.html#sect_input_spdpro "8.9.2.1.8. SPDPRO: Mobile hourly speed profile input file") (optional)                 ASCII    Weekday and weekend hourly speed profiles
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e25952}6.8.3.2. Input Environment Variables {#input-environment-variables .title}

</div>

</div>
:::

::: {.itemizedlist}
-   `APPLY_NOX_HUMIDITY_ADJ: `{.envar}: \[default: N\]

    Allows **Movesmrg** to apply NOx humidity correction to gridded
    hourly NOx emissions for RPD\_MODE and RPH\_MODE runs. If there is a
    header \"HUMIDITY\_ADJUSTED\_NOX Y\" listed in the MOVES lookup
    tables, it means that NOx emissions in those MOVES lookup tables are
    already adjusted and this flag will be overwritten to N. No NOx
    humidity correction will be applied.

    ::: {.itemizedlist}
    -   Y: Apply NOx humidity correction to non-NOx humidity correction
        applied MOVES lookup tables from RPD and RPH runs.

    -   N: Do not apply NOx humidity correction.
    :::

-   `MEMORY_OPTIMIZE_YN: `{.envar}: \[default: Y\]

    Allows **Movesmrg** to use less RAM memory. However, it will
    increase computational time of RPD\_MODE and RPV\_MODE runs.

    ::: {.itemizedlist}
    -   Y: Runs **Movesmrg** in memory optimization mode.

    -   N: Runs **Movesmrg** faster mode using high capacity of RAM
        memory.
    :::

-   `MRG_BYDAY`{.envar}: \[default: blank\]

    String code that specifies which source category is to use a by-day
    approach for the hourly input files. It must be set to \"M\" for a
    **Movesmrg** to create an output file for each day.

-   `MRG_GRDOUT_YN`{.envar}: \[default: N\]

    Determines whether **Movesmrg** produces a gridded output file.

    ::: {.itemizedlist}
    -   Y: Read the gridding matrix produced by the **Grdmat**

    -   N: Do not read the gridding matrix.
    :::

-   `MRG_SPCOUT_YN`{.envar}: \[default: N\]

    Determines whether **Movesmrg** produces a speciated output file.

    ::: {.itemizedlist}
    -   Y: Read the gridding matrix produced by the **Spcmat**

    -   N: Do not read the gridding matrix.
    :::

-   `MRG_REPCNY_YN`{.envar}: \[default: N\]

    Determines whether **Movesmrg** produces a report of emission totals
    by county

    ::: {.itemizedlist}
    -   Y: Produce the report by **Movesmrg**

    -   N: Do not produce the report
    :::

-   `MRG_REPSTA_YN`{.envar}: \[default: N\]

    Determines whether **Movesmrg** produces a report of emission totals
    by state

    ::: {.itemizedlist}
    -   Y: Produce the report by **Movesmrg**

    -   N: Do not produce the report
    :::

-   `MRG_REPSCC_YN`{.envar}: \[default: N\]

    Determines whether **Movesmrg** produces a report of emission totals
    by SCC

    ::: {.itemizedlist}
    -   Y: Produce the report by **Movesmrg**

    -   N: Do not produce the report
    :::

-   `MRG_REPSRC_YN`{.envar}: \[default: N\]

    Determines whether **Movesmrg** produces a report of emission totals
    by source.

    ::: {.itemizedlist}
    -   Y: Produce the report by **Movesmrg**. It will reset
        `MRG_REPCNY_YN`{.envar} and `MRG_REPSCC_YN`{.envar} to N to
        avoid to outputing duplicate information into the report.

    -   N: Do not produce the report
    :::

-   If `MRG_GRDOUT_UNIT`{.envar} \[default: units\]

    String code that permits user to change the unit of the gridded
    output file.

-   If `MRG_TOTOUT_UNIT`{.envar} \[default: units\]

    String code that permits user to change the unit of the state/county
    total report file.

-   `MTMP_OUTPUT_YN`{.envar}: \[default: N\]

    Defines whether **Temporal** outputs the **Temporal** intermediate
    output file from [Section 9.14,
    "**Temporal**"](ch09s14.html "9.14. Temporal") for **Smkreport** to
    create hourly emissions summary report based on hourly gridded
    emissions estimated by **Movesmrg**.

    ::: {.itemizedlist}
    -   Y: Output Temporal intermediate output file

    -   N: Do not output Temporal intermediate output file
    :::

-   `RPD_MODE:`{.envar} \[default: N\]

    Determines whether **Movesmrg** processes rate-per-distance
    emissions.

    ::: {.itemizedlist}
    -   Y: Process rate-per-distance emissions

    -   N: Do not process rate-per-distance emissions
    :::

-   `RPH_MODE:`{.envar} \[default: N\]

    Determines whether **Movesmrg** processes rate-per-hour emissions.

    ::: {.itemizedlist}
    -   Y: Process rate-per-hour emissions

    -   N: Do not process rate-per-hour emissions
    :::

-   `RPV_MODE`{.envar}: \[default: N\]

    Determines whether **Movesmrg** processes rate-per-vehicle
    emissions.

    ::: {.itemizedlist}
    -   Y: Process rate-per-vehicle emissions

    -   N: Do not process rate-per-vehicle emissions
    :::

-   `RPP_MODE`{.envar}: \[default: N\]

    Determines whether **Movesmrg** processes rate-per-profile
    emissions.

    ::: {.itemizedlist}
    -   Y: Process rate-per-profile emissions

    -   N: Do not process rate-per-profile emissions
    :::

-   `SMK_MVSPATH`{.envar}: \[default: blank\]

    Defines the location of MOVES emission factors lookup tables.

-   `SMK_SOURCE`{.envar}: \[default: blank\]

    Sets the types of source category. It must be set to \"M\" for
    **Movesmrg**.

-   `SMK_SRCGROUP_OUTPUT_YN`{.envar}: \[default: N\]

    Indicates if source apportionment emissions should be output

    ::: {.itemizedlist}
    -   Y: Group sources and output source apportionment files

    -   N: Do not perform any source apportionment processing
    :::

-   `TEMP_BUFFER_BIN`{.envar}: \[default: 0.0\]

    Defines the temperature buffer value (°F). This value allows
    **Movesmrg** to cover the outside of min/max temperature range in
    `SMOKE_OUTFILE`{.envar} from **Met4moves** for **Movesmrg** RPP
    processing. If `TEMP_BUFFER_BIN`{.envar} is set to 10.0, the
    original max temperature which is 90.0°F will be treated as 100.0°F,
    and minimum temperaure (=30°F) will be treated as 20.0°F internally
    in **Movesmrg**. Emission rates for those temperatures outside of
    original temperature range will share the ones from original max/min
    temperatures.

-   `TMPVNAME`{.envar}: \[default: TEMP2\]

    Name of temperature variable to read from the meteorology files for
    **Movesmrg**.

-   `USE_AVG_SPD_DIST`{.envar}: \[default: N\]

    Allows the user to apply 16-speed bin average speed distribution
    profiles by region, SCC, day of week, and hour of day.

    ::: {.itemizedlist}
    -   Y: Apply 16-speed bin average speed distribution profiles.

    -   N: Do not apply average speed distribution profiles.
    :::

-   `USE_CONTROL_FACTORS`{.envar}: \[default: N\]

    Allows the user to apply control factor by region, SCC, pollutant,
    and month.

    ::: {.itemizedlist}
    -   Y: Apply control factors to MOVES emission rates from MOVES
        lookup tables.

    -   N: Do not apply control factor.
    :::

-   `USE_EXP_CONTROL_FAC_YN`{.envar}: \[default: N\]

    Allows the user to optionally apply pollutant/species-specific
    explict control factor by region, SCC, and month when
    `USE_CONTROL_FACTORS`{.envar} is set to Y.

    ::: {.itemizedlist}
    -   Y: Apply pollutant/species-specific explicit control factors to
        MOVES emission rates from MOVES lookup tables.

    -   N: Do not apply control factor.
    :::

-   `USE_EXP_GEO_CODES`{.envar}: \[default: N\]

    If set to Y then use GEOCODE\_LEVEL\[1-4\] files instead of the
    COSTCY file to define expanded geographical detail such as
    country-level(GEOCODE\_LEVEL1), country/state-level
    (GEOCODE\_LEVEL2), country/state/county-level (GEOCODE\_LEVEL3) or
    country/state/county/tribal-level (GEOCODE\_LEVEL4).

-   `USE_REF_CONTROL_FAC_YN`{.envar}: \[default: N\]

    Allows the user to optionally apply reference-county-level control
    factor by SCC, and month when `USE_CONTROL_FACTORS`{.envar} is set
    to Y.

    ::: {.itemizedlist}
    -   Y: Apply reference-county-level control factors to MOVES
        emission rates from MOVES lookup tables.

    -   N: Do not apply control factor.
    :::

-   `USE_HOURLY_SPEEDS`{.envar}: \[default: N\]

    Determine whether processes weekday/weekend hourly speed profiles or
    not.

    ::: {.itemizedlist}
    -   Y: Process weekday/weekend hourly speed profiles

    -   N: Do not process hourly speed profiles
    :::

-   `USE_SPCMAT_SPC_YN`{.envar}: \[default: N\]

    Determine whether estimate air quality model species using chemical
    speciation profiles or not.

    ::: {.itemizedlist}
    -   Y: Estimate model species emissions using GSPRO input file

    -   N: Estimate model species emissions directly from MOVES emission
        rates lookup tables
    :::
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e26402}6.8.3.3. Output Files {#output-files .title}

</div>

</div>
:::

::: {.informaltable}
  File Name                   Format           Description
  --------------------------- ---------------- -------------------------------------------------------------------------------------------------------------------------------
  `MGTS[_S|_L]`{.envar}       I/O API NetCDF   Model Ready Emissions File
  `MTMP_INV`{.envar}          I/O API NetCDF   Hourly emissions by source
  `REPMGTS[_S|_L]`{.envar}    ASCII            Report File
  `LOGFILE`{.envar}           ASCII            Logfile
  `SGINLNTS[_S|_L]`{.envar}   I/O API NetCDF   Emissions by source group, formatted as CMAQ in-line emissions data, produced if `SMK_SRCGROUP_OUTPUT_YN`{.envar} is set to Y
  `SRCGROUPS_OUT`{.envar}     I/O API NetCDF   Source group information, produced if `SMK_SRCGROUP_OUTPUT_YN`{.envar} is set to Y
  `SRCGRP_REPORT`{.envar}     ASCII            Source group report file, produced if `SMK_SRCGROUP_OUTPUT_YN`{.envar} is set to Y
:::
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  -------------------------- -------------------- -----------------------
  [Prev](ch06s08s02.html)     [Up](ch06s08.html)     [Next](ch06s09.html)
  6.8.2. Processing Order     [Home](index.html)         6.9. **Mrgelev**
  -------------------------- -------------------- -----------------------
:::
