::: {.navheader}
3.2.2. The basic SMOKE directories
:::

[Prev](ch03s02.html) 

3.2. Directory structure

 [Next](ch03s02s03.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#sect_dirs_basic_smoke_dirs}3.2.2. The basic SMOKE directories {#the-basic-smoke-directories .title}

</div>

</div>
:::

By default, SMOKE is installed in a directory called `SMK_HOME`{.envar}
(the complete process for installing SMOKE is described in [Chapter 12,
*Downloading, Installing, and Compiling
SMOKE*](ch12.html "Chapter 12. Downloading, Installing, and Compiling SMOKE")).
As shown in the previous section, `SMK_HOME`{.envar} is an environment
variable on which other SMOKE directories depend; it is the root
directory of all other SMOKE directories. When you install SMOKE, you
must define and create your own `SMK_HOME`{.envar} directory as part of
the installation process. Since `SMK_HOME`{.envar} is an environment
variable, you can choose whatever name you like; we cannot prescribe a
name for you because each UNIX user has a different computer and disk
names. One recommendation that we can make is that `SMK_HOME`{.envar} be
set close to the bottom of a directory structure, such as a short
directory name like `/models`{.filename}. Using a short directory name
will limit the overall directory lengths for some of the subdirectories
deep within the SMOKE directory structure. The `SMK_HOME`{.envar}
directory used for SMOKE can be the same directory used to install
[VERDI](http://www.verdi-tool.org) or the [I/O
API](http://www.baronams.com/products/ioapi/).

[Figure 3.1, "Basic SMOKE directories: the first three levels of the
directory
structure"](ch03s02s02.html#fig_dirs_basic_dirs "Figure 3.1. Basic SMOKE directories: the first three levels of the directory structure")
shows the first three layers of the SMOKE directory structure. All of
the directories in the figure are created during the SMOKE installation
process. From the `SMK_HOME`{.envar} directory stems the
`data`{.filename} directory, the `scripts`{.filename} directory, and the
`subsys`{.filename} directory. The `data`{.filename} directory
corresponds to the environment variable `SMKDAT`{.envar}, while the
`subsys`{.filename} directory corresponds to `SMK_SUBSYS`{.envar}; the
environment variables are shown in parentheses underneath the actual
directory names in the figure. The `scripts`{.filename} directory does
not have an associated environment variable since we did not feel that
one was necessary. The `subsys`{.filename} directory is discussed in
more detail within this subsection. The `data`{.filename} directory will
be described more fully in [Section 3.2.3, "Locations of input
files"](ch03s02s03.html "3.2.3. Locations of input files"),
[Section 3.2.4, "Locations of intermediate files for base and
growth/control
cases"](ch03s02s04.html "3.2.4. Locations of intermediate files for base and growth/control cases"),
[Section 3.2.5, "Locations of model-ready output files for base and
growth/control
cases"](ch03s02s05.html "3.2.5. Locations of model-ready output files for base and growth/control cases"),
and [Section 3.2.6, "Locations of
reports"](ch03s02s06.html "3.2.6. Locations of reports"), when we
describe the locations of input, intermediate, output, and report files.
We will not discuss the `scripts`{.filename} directory since it only
contains two general setup scripts that should not need to be modified
under normal SMOKE use.

::: {.figure}
[]{#fig_dirs_basic_dirs}

**Figure 3.1. Basic SMOKE directories: the first three levels of the
directory structure**

::: {.mediaobject}
![Basic SMOKE directories: the first three levels of the directory
structure](images\dirs\basic_directories_html.jpg)
:::
:::

The environment variables shown in parentheses are available to you once
you invoke the Assigns file from the command line. The run scripts that
come with SMOKE invoke the Assigns file to set up the environment
variables automatically. To manually invoke the Assigns file, you must
go to the `$SMKROOT`{.filename}/assigns directory and type

**`source <Assigns file name>`**

where *`<Assigns file name>`* is replaced with your specific Assigns
file name. Note that SMOKE only works with variants of the C-shell
including **csh** and **tcsh**. If you are running a different shell
(such as **bash**), you will need to switch into a C-shell before
sourcing the Assigns file or running any SMOKE scripts.

Once this command has been used in a UNIX window (e.g., **xterm**,
**terminal**, **console**), then the environment variables are available
at the command line or to a script that uses the Assigns file. What this
means is that the UNIX environment "[remembers]{.quote}" the setting of
the environment variable. To access the contents of the variable - in
this case, a path name - the dollar sign (\$) must be used in front of
the variable from a UNIX prompt or script. From the prompt, this is most
useful for changing directories. For example, after the Assigns file has
been invoked, the command

**`cd $SMKDAT`**

will take you to the `$SMK_HOME`{.filename}/data directory, no matter
where else in the directory structure you were located when the command
was issued. Similarly, the Assigns file can use these environment
variables for setting the paths for the input and output files.

As shown in [Figure 3.1, "Basic SMOKE directories: the first three
levels of the directory
structure"](ch03s02s02.html#fig_dirs_basic_dirs "Figure 3.1. Basic SMOKE directories: the first three levels of the directory structure"),
the `subsys`{.filename} directory (creating during installation of
SMOKE) contains six subdirectories, each with the following purposes:

::: {.itemizedlist}
-   `edss_tools`{.filename}: Contains the source code, makefiles, and
    library object files for the EDSS Tools library, necessary for
    compiling SMOKE programs.

-   `filesetapi`{.filename}: Contains the source code, makefiles, and
    library object files for the FileSetAPI library, necessary for
    compiling SMOKE programs.

-   `ioapi`{.filename}: A placeholder location for the I/O API library
    object files. When compiling SMOKE, the makefiles look here for the
    I/O API library and the SMOKE scripts look here for the I/O API
    utility programs. The files can be linked to the main I/O API
    installation which can be located elsewhere. Please see [Chapter 12,
    *Downloading, Installing, and Compiling
    SMOKE*](ch12.html "Chapter 12. Downloading, Installing, and Compiling SMOKE")
    for more information.

-   `ioapi_includes`{.filename}: Location for the I/O API include files,
    needed for compiling the FileSetAPI library, EDSS Tools library, and
    SMOKE libraries and programs. All makefiles that come with SMOKE
    look here for the I/O API include files.

-   `netcdf`{.filename}: A placeholder location for the NetCDF library
    object files. When compiling SMOKE, the makefiles look here for the
    NetCDF library, but the actual library can be linked to the main
    NetCDF installation, which can be elsewhere on your computer. Please
    see [Chapter 12, *Downloading, Installing, and Compiling
    SMOKE*](ch12.html "Chapter 12. Downloading, Installing, and Compiling SMOKE")
    for more information.

-   `smoke`{.filename}: This is the main SMOKE directory. It contains
    the Assigns files (one per modeling case), SMOKE source code,
    makefiles, scripts, and executables.
:::

[Figure 3.2, "Subdirectories of the main SMOKE
directory"](ch03s02s02.html#fig_dirs_subdirs_main "Figure 3.2. Subdirectories of the main SMOKE directory")
shows the subdirectories inside the main SMOKE directory,
`smoke`{.filename}; these are all created during the installation of
SMOKE. These subdirectories contain the Assigns files, source code and
makefiles, scripts, and executables.

::: {.figure}
[]{#fig_dirs_subdirs_main}

**Figure 3.2. Subdirectories of the main SMOKE directory**

::: {.mediaobject}
![Subdirectories of the main SMOKE
directory](images\dirs\subdirs_main_html.jpg)
:::
:::

These five subdirectories have the following purposes:

::: {.itemizedlist}
-   `assigns`{.filename}: Contains the Assigns files and all helper
    scripts for the Assigns files.

-   `doc`{.filename}: Contains the files that the SMOKE installation
    processes use to check that the installation and testing of SMOKE
    have worked properly.

-   `$SMOKE_EXE`{.filename}: This directory contains the executables for
    your particular system. Different directory names apply to different
    platforms (e.g., `Linux2_x86_64pg`{.filename},
    `IRIXn32f90`{.filename}, `SunOS5f90`{.filename}). For more
    information about the various platforms for which SMOKE is
    available, see [Chapter 12, *Downloading, Installing, and Compiling
    SMOKE*](ch12.html "Chapter 12. Downloading, Installing, and Compiling SMOKE").

-   `scripts`{.filename}: Contains run scripts and other scripts

    ::: {.itemizedlist}
    -   `scripts/install`{.filename}: Scripts to install SMOKE and check
        the installation

    -   `scripts/make`{.filename}: Scripts for compiling SMOKE

    -   `scripts/run`{.filename}: Default run scripts and associated
        helper scripts
    :::

-   `src`{.filename}: Contains subdirectories that store the source code
    and makefiles for each SMOKE program:

    ::: {.itemizedlist}
    -   `src/biog`{.filename}: **Normbeis3**, **Tmpbeis3**

    -   `src/cntlmat`{.filename}: **Cntlmat**

    -   `src/emmod`{.filename}: Fortran 90 modules used by multiple
        SMOKE programs

    -   `src/emqa`{.filename}: **Smkreport**

    -   `src/emutil`{.filename}: **Aggwndw**, **Beld3to2**,
        **BlueSky2Inv**, **CEMScan**, **Geofac**, **Invsplit**,
        **Layalloc**, **Metcombine**, **Metscan**, **Pktreduc**,
        **Smk2emis**, **Surgtool**, **Uam2ncf**

    -   `src/grdmat`{.filename}: **Grdmat**

    -   `src/inc`{.filename}: Include files shared by multiple SMOKE
        programs

    -   `src/lib`{.filename}: SMOKE library

    -   `src/movesmrg`{.filename}: **Movesmrg**, **Met4moves**

    -   `src/point`{.filename}: **Elevpoint**, **Laypoint**

    -   `src/smkinven`{.filename}: **Grwinven**, **Smkinven**

    -   `src/smkmerge`{.filename}: **Mrgelev**, **Mrggrid**,
        **Smkmerge**

    -   `src/spcmat`{.filename}: **Spcmat**

    -   `src/temporal`{.filename}: **Temporal**
    :::
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  --------------------------- -------------------- ----------------------------------
  [Prev](ch03s02.html)         [Up](ch03s02.html)             [Next](ch03s02s03.html)
  3.2. Directory structure     [Home](index.html)     3.2.3. Locations of input files
  --------------------------- -------------------- ----------------------------------
:::
