::: {.navheader}
5.3.10. **Metcombine**
:::

[Prev](ch05s03s09.html) 

5.3.  SMOKE Utility Programs

 [Next](ch05s03s11.html)

------------------------------------------------------------------------

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

### []{#sect_utilities_metcombine}5.3.10. **Metcombine** {#metcombine .title}

</div>

</div>
:::

::: {.toc}
[[5.3.10.1. Description](ch05s03s10.html#d0e20488)]{.section}

[[5.3.10.2. Processing Order](ch05s03s10.html#d0e20518)]{.section}

[[5.3.10.3. Files and Environment
Variables](ch05s03s10.html#d0e20537)]{.section}
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e20488}5.3.10.1. Description {#description .title}

</div>

</div>
:::

**Metcombine** combines 2-D gridded meteorology data with the 1st layer
of 3-D gridded meteorology data to create custom files for on-road
mobile processing with MOVES. To calculate humidity data for use in
MOVES, the program **Met4moves** needs temperature, pressure, and water
vapor mixing ratio data in the same meteorology file. Pressure and
mixing ratio data are typically found in the `MET_CRO_3D`{.envar} file
with the variable names PRES and QV, respectively. The
`MET_CRO_2D`{.envar} file usually contains ground-level temperatures
(TEMPG), 1.5 meter temperatures (TEMP1P5), 2 meter temperatures (TEMP2),
and 10 meter temperatures (TEMP10). While it is possible to use air
temperature data from the `MET_CRO_3D`{.envar} file (variable named TA),
it is generally recommended to use temperature data from closer to the
ground, i.e. ground or 1.5 meter temperatures from `MET_CRO_2D`{.envar}.
**Metcombine** is used to create custom meteorology files that contain
the variables PRES, QV, and TEMPG (or any other temperature variable).

The program takes two I/O API NetCDF gridded meteorology files as input.
The files must have identical grid paramaters, start dates and times,
time steps, and run lengths. **Metcombine** is generally used to combine
a 2-D file with a 3-D file, but the program is not restricted to that
combination; it can be used to combine two 2-D files or the 1st layers
of two 3-D files.
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e20518}5.3.10.2. Processing Order {#processing-order .title}

</div>

</div>
:::

**Metcombine** can optionally be run before **Met4moves**. If used,
**Metcombine** must be run for each individual meteorology file you need
to create. For example, if you have five days worth of meteorology data
as one-day files, you'll need to run **Metcombine** five times. If the
meteorology variables you wish to use are already in the same file, then
you do not need to use **Metcombine**. Example: If you decide to use
ambient air temperature (TA) from the same METCRO\_3D file that also
contains PRES and QV, then you do not need to run Metcombine.
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

#### []{#d0e20537}5.3.10.3. Files and Environment Variables {#files-and-environment-variables .title}

</div>

</div>
:::

::: {.toc}
[[5.3.10.3.1. Input Files](ch05s03s10.html#d0e20540)]{.section}

[[5.3.10.3.2. Input Environment
Variables](ch05s03s10.html#d0e20573)]{.section}

[[5.3.10.3.3. Output Files](ch05s03s10.html#d0e20590)]{.section}
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#d0e20540}5.3.10.3.1. Input Files {#input-files .title}

</div>

</div>
:::

::: {.informaltable}
  File Name            Format           Description
  -------------------- ---------------- ------------------------------------------------------------------
  `METFILE1`{.envar}   I/O API NetCDF   First gridded meteorology file; can be either a 2-D or 3-D file
  `METFILE2`{.envar}   I/O API NetCDF   Second gridded meteorology file; can be either a 2-D or 3-D file
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#d0e20573}5.3.10.3.2. Input Environment Variables {#input-environment-variables .title}

</div>

</div>
:::

::: {.itemizedlist}
-   `VARLIST`{.envar}: \[default: none\]

    Sets the names of the variables that will be read from
    `METFILE1`{.envar} and `METFILE2`{.envar}. Each variable must occur
    in exactly one of the meteorology files, i.e. the same variable
    cannot be in both files.
:::
:::

::: {.section lang="en"}
::: {.titlepage}
<div>

<div>

##### []{#d0e20590}5.3.10.3.3. Output Files {#output-files .title}

</div>

</div>
:::

::: {.informaltable}
  File Name           Format           Description
  ------------------- ---------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  `OUTFILE`{.envar}   I/O API NetCDF   2-D output meteorology file. This file contains the variables requested in `VARLIST`{.envar}; for 3-D data, `OUTFILE`{.envar} will only contain the 1st layer of data. `OUTFILE`{.envar} will have the same grid parameters, start date and time, time step, and run length as `METFILE1`{.envar} and `METFILE2`{.envar}.
:::
:::
:::
:::

::: {.navfooter}

------------------------------------------------------------------------

  -------------------------- -------------------- --------------------------
  [Prev](ch05s03s09.html)     [Up](ch05s03.html)     [Next](ch05s03s11.html)
  5.3.9. **Layalloc**         [Home](index.html)         5.3.11. **Metscan**
  -------------------------- -------------------- --------------------------
:::
