<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   
      <title>4.4.2.&nbsp;Use new inventory data</title>
      <link rel="stylesheet" href="manual.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.67.2">
      <link rel="start" href="index.html" title="SMOKE v4.7 User&#8217;s Manual">
      <link rel="up" href="ch04s04.html" title="4.4.&nbsp;How to use SMOKE">
      <link rel="prev" href="ch04s04.html" title="4.4.&nbsp;How to use SMOKE">
      <link rel="next" href="ch04s04s03.html" title="4.4.3.&nbsp;Select which pollutants in the inventory are kept">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <th colspan="3" align="center">4.4.2.&nbsp;Use new inventory data</th>
            </tr>
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="ch04s04.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">4.4.&nbsp;How to use SMOKE</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="ch04s04s03.html">Next</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="section" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h3 class="title"><a name="sect_scripts_use_new_inv"></a>4.4.2.&nbsp;Use new inventory data
                  </h3>
               </div>
            </div>
         </div>
         <div class="toc">
            <dl>
               <dt><span class="section"><a href="ch04s04s02.html#sect_scripts_area_invs">4.4.2.1. Area/non-point inventories</a></span></dt>
               <dt><span class="section"><a href="ch04s04s02.html#sect_scripts_nonroad_invs">4.4.2.2. Nonroad mobile inventories</a></span></dt>
               <dt><span class="section"><a href="ch04s04s02.html#d0e12518">4.4.2.3. On-road mobile inventories</a></span></dt>
               <dt><span class="section"><a href="ch04s04s02.html#d0e12634">4.4.2.4. Point/fires inventories</a></span></dt>
               <dt><span class="section"><a href="ch04s04s02.html#sect_scripts_hour_day_invs">4.4.2.5. Day-specific and hour-specific point and fire inventories</a></span></dt>
               <dt><span class="section"><a href="ch04s04s02.html#sect_scripts_future_invs">4.4.2.6. Future-year inventories</a></span></dt>
               <dt><span class="section"><a href="ch04s04s02.html#sect_scripts_pregridded">4.4.2.7. Pre-gridded inventories</a></span></dt>
               <dt><span class="section"><a href="ch04s04s02.html#sect_scripts_all_invs">4.4.2.8. Files and settings for all inventories</a></span></dt>
               <dt><span class="section"><a href="ch04s04s02.html#sect_scripts_average_day_invs">4.4.2.9. Using average-day and annual data in the same run</a></span></dt>
            </dl>
         </div>
         <p>This section describes what steps are necessary to take when using new inventory data for anthropogenic sources. For information
            on biogenic sources, see <a href="ch04s04s15.html" title="4.4.15.&nbsp;Use BEIS3">Section&nbsp;4.4.15, &#8220;Use BEIS3&#8221;</a>. For more information about the details of each source category (e.g., what is the difference between using MOVES emission
            factors or precomputed on-road mobile emissions), see <a href="ch02s08.html#sect_concepts_summary_source_processing" title="2.8.1.&nbsp;Summary of SMOKE processing categories">Section&nbsp;2.8.1, &#8220;Summary of SMOKE processing categories&#8221;</a>.
         </p>
         <p>Because this section is so spread out, we provide a small section guide here. This section includes the following subsections:</p>
         <div class="itemizedlist">
            <ul type="disc" compact>
               <li>Area/non-point inventories</li>
               <li>Nonroad mobile inventories</li>
               <li>On-road mobile inventories</li>
               <li>Point inventories</li>
               <li>Day-specific and hour-specific point and fire inventories</li>
               <li>Future-year inventories</li>
               <li>Pre-gridded inventories (for same output modeling domain or for converting to a different modeling domain (example: EDGAR/RCP/HTAP
                  to CMAQ ready emissions file)
               </li>
               <li>Using seasonal and annual data in the same run</li>
               <li>Files and settings for all inventories</li>
            </ul>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="sect_scripts_area_invs"></a>4.4.2.1.&nbsp;Area/non-point inventories
                     </h4>
                  </div>
               </div>
            </div>
            <div class="orderedlist">
               <ol type="1">
                  <li>
                     <p>Determine the file format that you have (for preformatted data) or want to create (for new data).</p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>Preformatted data considerations</p>
                              <div class="itemizedlist">
                                 <ul type="disc">
                                    <li>
                                       <p>If you have preexisting data in SMOKE input format, then you will most likely want to use that format to input to SMOKE, unless
                                          you discover that you need a different format to take advantage of a SMOKE feature not available in a different format.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you have multiple files in a single format, then you can combine these into a single SMOKE run using a list file.</p>
                                    </li>
                                    <li>
                                       <p>If you have data in more than one format other than the case just mentioned, you must convert all files to the same format
                                          or process them separately in SMOKE, merging the hourly, gridded, speciated emissions files using <span><strong class="command">Mrggrid</strong></span>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If your area inventory includes nonroad mobile sources, you can process nonroad mobile sources with stationary area sources
                                          in most cases (see next bullet for exception).
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you want to combine nonroad mobile criteria and toxics inventories, you need to process nonroad mobile sources separately
                                          from area sources (see <a href="ch04s04s02.html#sect_scripts_nonroad_invs" title="4.4.2.2.&nbsp;Nonroad mobile inventories">Section&nbsp;4.4.2.2, &#8220;Nonroad mobile inventories&#8221;</a>).
                                       </p>
                                    </li>
                                    <li>
                                       <p>Pregridded data from any source category can be input to SMOKE as an area source, but you must convert the data to an I/O
                                          API NetCDF file format first. See <a href="ch04s04s02.html#sect_scripts_pregridded_invs_same" title="4.4.2.7.1.&nbsp;Pre-gridded inventories from the same modeling domain as an area source without source characterization or attributes">Section&nbsp;4.4.2.7.1, &#8220;Pre-gridded inventories from the same modeling domain as an area source without source characterization
                                             or attributes&#8221;</a> for more information.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>Collect or create inventories in correct formats.</p>
                     <p>Inventory files for area sources are usually named starting with &#8220;<span class="quote">arinv</span>&#8221;, because <code class="envar">ARINV</code> is the logical file name (environment variable) that <span><strong class="command">Smkinven</strong></span> uses to read the file. The formats available for area/non-point sources are:
                     </p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>List format. The list format is simply an ASCII file that lists all of the files that you want SMOKE to import in a single
                                 run.
                              </p>
                           </li>
                           <li>
                              <p>List Grid format. The list grid format is simply an ASCII file that lists all of the global gridded inventory files that you
                                 want SMOKE to import in a single run. The List Grid format has four columns.
                                 	Assigned SCC, Pollutant ID, Local Variable Name, Month of inventory and Full inventory fine directory path and filename.
                              </p>
                           </li>
                           <li>
                              <p>ORL and FF10 formats. These formats are most appropriate for non-point toxics inventories, but also can be used for any inventory
                                 data.
                              </p>
                           </li>
                           <li>
                              <p>Pregridded I/O API format. This format can only be used for pregridded data that has been converted to a time-independent,
                                 gridded I/O API file. The variables in the file are the pollutants. No SCCs or other source information can be provided with
                                 this format.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>Set and/or check the file headers that apply for your file format.</p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>File format header: Make sure that the first line of the list file or individual files start with the #LIST (for list files
                                 only),#LIST GRID, #ORL, #FF10 (see <a href="ch08s02.html#sect_input_inventory_format" title="8.2.1.2.&nbsp;File format header">Section&nbsp;8.2.1.2, &#8220;File format header&#8221;</a>).
                              </p>
                           </li>
                           <li>
                              <p>File type (#TYPE header): The type is important because it helps SMOKE determine the file format. Make sure that the header
                                 has been set according to the directions in <a href="ch08s02.html#sect_input_inventory_header" title="8.2.1.4.&nbsp;Header records">Section&nbsp;8.2.1.4, &#8220;Header records&#8221;</a>.
                              </p>
                           </li>
                           <li>
                              <p>Country (#COUNTRY header): Make sure that this head has been used and that the country name used in this header matches the
                                 name in the country section of the <code class="envar">COSTCY</code> or <code class="envar">GEOCODE_LEVEL[1-4]</code> file (if USE_EXP_GEOCODE Y) file.
                              </p>
                           </li>
                           <li>
                              <p>Inventory year (#YEAR). Make sure that the inventory year is accurately reflected in the header. This is the only way SMOKE
                                 knows what year the data is for.  If this year is not a base year but a future-year, make sure to follow the additional instructions
                                 in <a href="ch04s04s02.html#sect_scripts_future_invs" title="4.4.2.6.&nbsp;Future-year inventories">Section&nbsp;4.4.2.6, &#8220;Future-year inventories&#8221;</a>.
                              </p>
                           </li>
                           <li>
                              <p>Description (#DESC header): Although this header is not required, it is good practice to take advantage of it and include
                                 as much information about the data as you have. There is no limit to the number of #DESC headers that can be included in the
                                 file.
                              </p>
                           </li>
                           <li>
                              <p>Data header (#POLID or #DATA header): Make sure that this required header is included in the file. It should accurately reflect
                                 the data values provided on each line of the file. If there are data fields at the end of the file that you want to drop from
                                 being imported, you can leave them off of the #POLID or #DATA header to cause them to not be imported by <span><strong class="command">Smkinven</strong></span> (see also the <code class="envar">INVTABLE</code> file for dropping emissions during import).
                              </p>
                              <p>For ORL format, this header does not apply. The pollutants are designated by code number (i.e., CAS number) in the file format
                                 and therefore the header is not needed.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>Install inventory files in <code class="filename"><code class="envar">$ARDAT</code></code> directory.
                     </p>
                     <p>This directory is <code class="filename"><code class="envar">$SMKDAT</code>/inventory/<code class="envar">$INVID</code>/area</code>.
                     </p>
                  </li>
                  <li>
                     <p>Ensure the Assigns file has the <code class="envar">ARINV</code> variable set to the <code class="envar">ARINV</code> file name for your area-source inventory file.
                     </p>
                  </li>
                  <li>
                     <p>Optionally, set up to assign point-source locations to area sources using the <code class="envar">ARTOPNT</code> file.
                     </p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>Put the <code class="envar">ARTOPNT</code> file in the <code class="filename"><code class="envar">$INVDIR</code>/other</code> directory.
                              </p>
                           </li>
                           <li>
                              <p>Ensure the name of the <code class="envar">ARTOPNT</code> file is consistent with the <code class="envar">ARTOPNT</code> setting in the Assigns file.
                              </p>
                           </li>
                           <li>
                              <p>Make sure that the <code class="envar">ARTOPNT</code> file data are consistent with the year of your inventory (e.g., use 1999 coordinates for a 1999 inventory), or that you can
                                 accept any discrepancies.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>See also steps for all source categories in <a href="ch04s04s02.html#sect_scripts_all_invs" title="4.4.2.8.&nbsp;Files and settings for all inventories">Section&nbsp;4.4.2.8, &#8220;Files and settings for all inventories&#8221;</a>.
                     </p>
                  </li>
               </ol>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="sect_scripts_nonroad_invs"></a>4.4.2.2.&nbsp;Nonroad mobile inventories
                     </h4>
                  </div>
               </div>
            </div>
            <div class="orderedlist">
               <ol type="1">
                  <li>
                     <p>Determine the file format that you have (for preformatted data) or want to create (for new data).</p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <div class="itemizedlist">
                                 <ul type="disc">
                                    <li>
                                       <p>See <a href="ch04s04s02.html#sect_scripts_area_invs" title="4.4.2.1.&nbsp;Area/non-point inventories">Section&nbsp;4.4.2.1, &#8220;Area/non-point inventories&#8221;</a> for issues relating to stationary area / non-point sources. These are the same issues as for nonroad mobile sources.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you need to process nonroad mobile separately from stationary area/non-point sources because of recommendations in <a href="ch04s04s02.html#sect_scripts_area_invs" title="4.4.2.1.&nbsp;Area/non-point inventories">Section&nbsp;4.4.2.1, &#8220;Area/non-point inventories&#8221;</a>, you must separate the stationary area/non-point and nonroad mobile sources to two separate files if they are not already
                                          separated. There is no SMOKE utility to do this, but the UNIX <span><strong class="command">grep</strong></span> command can be used to search for all SCCs in the nonroad mobile inventory; for example, all SCCs starting with &#8220;<span class="quote">22</span>&#8221;.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <p>New data considerations</p>
                              <div class="itemizedlist">
                                 <ul type="disc">
                                    <li>
                                       <p>See <a href="ch04s04s02.html#sect_scripts_area_invs" title="4.4.2.1.&nbsp;Area/non-point inventories">Section&nbsp;4.4.2.1, &#8220;Area/non-point inventories&#8221;</a> for issues relating to stationary area and non-point sources. These are the same issues as for nonroad mobile sources.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Decide whether area and nonroad mobile sources will be processed together, which may depend on whether the available inventory
                                          data include both area and nonroad mobile or whether they are already separate. One reason for separate processing is if you
                                          anticipate control strategies that affect only stationary area or only nonroad mobile sources, though it is not required that
                                          the processing be separate to apply such controls. A second reason for separate files if you are also using toxics inventories.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <p><span class="emphasis"><em>If processing nonroad mobile sources separately, continue with these steps. Otherwise, the steps for area/non-point sources
                              listed in <a href="ch04s04s02.html#sect_scripts_area_invs" title="4.4.2.1.&nbsp;Area/non-point inventories">Section&nbsp;4.4.2.1, &#8220;Area/non-point inventories&#8221;</a> will be sufficient.</em></span></p>
                  </li>
                  <li>
                     <p>Collect or create inventories in correct formats.</p>
                     <p>Inventory files for nonroad sources are usually named starting with &#8220;<span class="quote">nrinv</span>&#8221;, because the Assigns file uses the <code class="envar">NRINV</code> environment variable to set the <code class="envar">ARINV</code> logical file name (environment variable) that <span><strong class="command">Smkinven</strong></span> uses to read the file. The list of available formats for nonroad mobile sources is:
                     </p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>List format. The list format is simply an ASCII file that lists all of the files that you want SMOKE to import in a single
                                 run.
                              </p>
                           </li>
                           <li>
                              <p>ORL format. This format is most appropriate for criteria and toxics inventories, but also can be used for any inventory data.</p>
                           </li>
                           <li>
                              <p>FF10 format. This format is most appropriate for criteria and toxics inventories, but also can be used for any inventory data.</p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>Set and/or check the file headers that apply for your file format.</p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>File format header: Make sure that the first line of the list file or individual files start with the #LIST (for list files
                                 only),#LIST GRID, #ORL, #FF10.
                              </p>
                           </li>
                           <li>
                              <p>For other headers, please refer to the documentation in step (3) of the area/non-point steps in <a href="ch04s04s02.html#sect_scripts_area_invs" title="4.4.2.1.&nbsp;Area/non-point inventories">Section&nbsp;4.4.2.1, &#8220;Area/non-point inventories&#8221;</a>.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>Install inventory files in <code class="filename"><code class="envar">$NRDAT</code></code> directory.
                     </p>
                     <p>This directory is <code class="filename"><code class="envar">$SMKDAT</code>/inventory/<code class="envar">$INVID</code>/nonroad</code>.
                     </p>
                  </li>
                  <li>
                     <p>Ensure the Assigns file has the <code class="envar">NRINV</code> variable set to the <code class="envar">NRINV</code> file name for your new nonroad-mobile-source inventory file.
                     </p>
                  </li>
                  <li>
                     <p>Optionally, set up to assign point-source locations to nonroad mobile sources using the <code class="envar">ARTOPNT</code> file.
                     </p>
                     <p>Please refer to the documentation in step (6) of the area/non-point steps in <a href="ch04s04s02.html#sect_scripts_area_invs" title="4.4.2.1.&nbsp;Area/non-point inventories">Section&nbsp;4.4.2.1, &#8220;Area/non-point inventories&#8221;</a>.
                     </p>
                  </li>
                  <li>
                     <p>See also steps for all source categories in <a href="ch04s04s02.html#sect_scripts_all_invs" title="4.4.2.8.&nbsp;Files and settings for all inventories">Section&nbsp;4.4.2.8, &#8220;Files and settings for all inventories&#8221;</a>.
                     </p>
                  </li>
               </ol>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e12518"></a>4.4.2.3.&nbsp;On-road mobile inventories
                     </h4>
                  </div>
               </div>
            </div>
            <div class="orderedlist">
               <ol type="1">
                  <li>
                     <p>Determine the file format that you have (for preformatted data) or want to create (for new data).</p>
                     <div class="orderedlist">
                        <div class="itemizedlist">
                           <ul type="disc">
                              <li>
                                 <p>If using MOVES emission factors through SMOKE, create a VMT file in FF10 on-road mobile activity format (or use in combination
                                    with list format).
                                 </p>
                              </li>
                              <li>
                                 <p>If using both VMT and emissions, you <span class="emphasis"><em>must</em></span> use a list-format to import the two separate inventories together. 
                                 </p>
                              </li>
                              <li>
                                 <p>If using both criteria and toxics data and wish to have the full functionality of SMOKE for both inventories, you must use
                                    a list file to list both inventory files (criteria and toxics) for SMOKE to combine.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <ol type="a"></ol>
                     </div>
                  </li>
                  <li>
                     <p>Collect or create inventories in correct formats.</p>
                     <p>Inventory files for on-road mobile sources are usually named starting with &#8220;<span class="quote">mbinv</span>&#8221;, because <span><strong class="command">Smkinven</strong></span> uses the <code class="envar">MBINV</code> logical file name (environment variable) to read the file. The list of available formats for on-road mobile sources is:
                     </p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>List format. The list format is simply an ASCII file that lists all of the files that you want SMOKE to import in a single
                                 run.
                              </p>
                           </li>
                           <li>
                              <p>ORL and FF10 format. These formats are most appropriate for toxics inventories, but also can be used for any inventory data.</p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>Set and/or check the file headers that apply for your file format.</p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>Please refer to the documentation in step (3) of the area/non-point steps in <a href="ch04s04s02.html#sect_scripts_area_invs" title="4.4.2.1.&nbsp;Area/non-point inventories">Section&nbsp;4.4.2.1, &#8220;Area/non-point inventories&#8221;</a>.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>Install inventory files in <code class="filename"><code class="envar">$MBDAT</code></code> directory.
                     </p>
                     <p>This directory is <code class="filename"><code class="envar">$SMKDAT</code>/inventory/<code class="envar">$INVID</code>/mobile</code></p>
                  </li>
                  <li>
                     <p>Install other mobile-specific files in inventory directories.</p>
                     <p>The following mobile-specific files must also be installed in the <code class="envar">MBDAT</code> directory. These files can usually be copied from the example files provided with the SMOKE installation. The formats and
                        additional discussion about the contents of these files can be found in <a href="ch08s09s02.html" title="8.9.2.&nbsp;Mobile">Section&nbsp;8.9.2, &#8220;Mobile&#8221;</a>. These files are:
                     </p>
                     <div class="itemizedlist">
                        <ul type="disc">
                           <li>
                              <p><code class="envar">MCXREF</code> (MOVES usage only)
                              </p>
                           </li>
                           <li>
                              <p><code class="envar">MFMREF</code> (MOVES usage only)
                              </p>
                           </li>
                           <li>
                              <p><code class="envar">MEPROC</code> (MOVES usage only)
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>For all inputs needed for MOVES usage only, refer to <a href="ch04s04s12.html" title="4.4.12.&nbsp;Use MOVES for on-road mobile sources">Section&nbsp;4.4.12, &#8220;Use MOVES for on-road mobile sources&#8221;</a>.
                     </p>
                  </li>
                  <li>
                     <p>See also steps for all source categories in <a href="ch04s04s02.html#sect_scripts_all_invs" title="4.4.2.8.&nbsp;Files and settings for all inventories">Section&nbsp;4.4.2.8, &#8220;Files and settings for all inventories&#8221;</a>.
                     </p>
                  </li>
               </ol>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e12634"></a>4.4.2.4.&nbsp;Point/fires inventories
                     </h4>
                  </div>
               </div>
            </div>
            <div class="orderedlist">
               <ol type="1">
                  <li>
                     <p>Determine the file format that you have (for preformatted data) or want to create (for new data).</p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>Preformatted data considerations</p>
                              <div class="itemizedlist">
                                 <ul type="disc">
                                    <li>
                                       <p>If you have preexisting data in SMOKE input format, then you will most likely want to use that format to input to SMOKE, unless
                                          you discover that you need a different format to take advantage of a SMOKE feature not available in a different format.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Pregridded data must be input as an area source.</p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <p>New data considerations</p>
                              <div class="itemizedlist">
                                 <ul type="disc">
                                    <li>
                                       <p>Hour-specific or day-specific data (including precomputed plume-rise data) are covered in <a href="ch04s04s02.html#sect_scripts_hour_day_invs" title="4.4.2.5.&nbsp;Day-specific and hour-specific point and fire inventories">Section&nbsp;4.4.2.5, &#8220;Day-specific and hour-specific point and fire inventories&#8221;</a>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>For wildfires and prescribed fires emission modeling without precomputed plume rise, you could use <code class="envar">ORL FIRE</code> format for both criteria and toxics inventory together. Using a master (annual) inventory file (<code class="envar">PTINV</code>) for fires described in <a href="ch08s02s08.html#sect_input_ptinv_fire" title="8.2.8.3.&nbsp;ORL FIRE Format">Section&nbsp;8.2.8.3, &#8220;ORL FIRE Format&#8221;</a>, SMOKE requires day-specific inventory file(s) (<code class="envar">PTDAY</code>) described in <a href="ch08s02s06.html#sect_input_ptday_fireemis" title="8.2.6.2.&nbsp;ORL FIREEMIS Emission Format">Section&nbsp;8.2.6.2, &#8220;ORL FIREEMIS Emission Format&#8221;</a> to provide both criteria and toxics inventories for those matched sources. See more infomation about how-to-do at <a href="ch04s04s17.html" title="4.4.17.&nbsp;Plume Rise Calculation for Fires">Section&nbsp;4.4.17, &#8220;Plume Rise Calculation for Fires&#8221;</a>.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>Collect or create inventories in correct formats.</p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>List format. The list format is simply an ASCII file that lists all of the files that you want SMOKE to import in a single
                                 run.
                              </p>
                           </li>
                           <li>
                              <p>ORL format. This format is most appropriate for point toxics inventories, but also can be used for any inventory data.</p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>Set and/or check the file headers that apply for your file format.</p>
                     <p>Please refer to the documentation in step (3) of the area/non-point steps in <a href="ch04s04s02.html#sect_scripts_area_invs" title="4.4.2.1.&nbsp;Area/non-point inventories">Section&nbsp;4.4.2.1, &#8220;Area/non-point inventories&#8221;</a>.
                     </p>
                  </li>
                  <li>
                     <p>Install inventory files in <code class="filename"><code class="envar">$PTDAT</code></code> directory.
                     </p>
                     <p>This directory is <code class="filename"><code class="envar">$SMKDAT</code>/inventory/<code class="envar">$INVID</code>/point</code></p>
                  </li>
                  <li>
                     <p>Ensure the Assigns file has the <code class="envar">PTINV</code> variable set to the <code class="envar">PTINV</code> file name for your point-source inventory file.
                     </p>
                  </li>
                  <li>
                     <p>For hour-specific and day-specific data, including fire data, see <a href="ch04s04s02.html#sect_scripts_hour_day_invs" title="4.4.2.5.&nbsp;Day-specific and hour-specific point and fire inventories">Section&nbsp;4.4.2.5, &#8220;Day-specific and hour-specific point and fire inventories&#8221;</a>.
                     </p>
                  </li>
                  <li>
                     <p>See also steps for all source categories in <a href="ch04s04s02.html#sect_scripts_all_invs" title="4.4.2.8.&nbsp;Files and settings for all inventories">Section&nbsp;4.4.2.8, &#8220;Files and settings for all inventories&#8221;</a>.
                     </p>
                  </li>
               </ol>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="sect_scripts_hour_day_invs"></a>4.4.2.5.&nbsp;Day-specific and hour-specific point and fire inventories
                     </h4>
                  </div>
               </div>
            </div>
            <p>Point sources in SMOKE can include day-specific or hour-specific data. This can include fire emissions and plume rise data.
               The following steps must be performed to use day-specific and/or hour-specific data in SMOKE.
            </p>
            <div class="orderedlist">
               <ol type="1">
                  <li>
                     <p>Determine the files that need to be created and their formats</p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>For day-specific emissions data, create the list file <code class="envar">PTDAY</code> and one or more files with day-specific emissions in the format provided in <a href="ch08s02s06.html" title="8.2.6.&nbsp;PTDAY: Point source day-specific emissions">Section&nbsp;8.2.6, &#8220;<code class="envar">PTDAY</code>: Point source day-specific emissions&#8221;</a>. The format requires that a list file be used to point to the actual data files, even if a single data file with emissions
                                 data is used.
                              </p>
                           </li>
                           <li>
                              <p>For day-specific emissions data, the daily total should ideally be based on the same time zone as is being modeled by SMOKE.
                                 SMOKE needs to use the same output time zone (set with the <code class="envar">OUTZONE</code> setting) as is used in the meteorology data that will be input to the air quality model. For example, if the time zone being
                                 modeled by SMOKE were GMT, then ideally the daily total emissions would be from 0 GMT to 23 GMT for each day.
                              </p>
                           </li>
                           <li>
                              <p>For hour-specific emissions data that is <span class="emphasis"><em>not</em></span> CEM data, create the list file <code class="envar">PTHOUR</code> and one or more files with hour-specific emissions in the format provided in <a href="ch08s02s07.html" title="8.2.7.&nbsp;PTHOUR: Point source hour-specific emissions">Section&nbsp;8.2.7, &#8220;<code class="envar">PTHOUR</code>: Point source hour-specific emissions&#8221;</a>. The format requires that a list file be used to point to the actual data files, even if a single data file with emissions
                                 data is used.
                              </p>
                           </li>
                           <li>
                              <p>If using CEM data, the data files for 1995 through 2000 are available with SMOKE. A list file <code class="envar">PTHOUR</code> must be created to list the one or more CEM data files that will be input. To speed processing, the DATERANGE setting can
                                 be used in the list file <code class="envar">PTHOUR</code> to cause SMOKE to skip the dates in the CEM files that are not needed.  Detail information is described in <a href="ch02s09s19.html" title="2.9.19.&nbsp;Processing hour-specific CEM data">Section&nbsp;2.9.19, &#8220;Processing hour-specific CEM data&#8221;</a></p>
                           </li>
                           <li>
                              <p>If using hourly precomputed plume rise (e.g., for fire data), the <code class="envar">PTHOUR</code> file should be created as described above for emissions data, but specific variable names must be provided. The allowable
                                 data includes the fraction of the plume in layer 1, the plume bottom height, and the plume top height.
                              </p>
                           </li>
                           <li>
                              <p>If using daily fire inventories without precomputed plume rise, the <code class="envar">PTDAY</code> file should be created as described above for emissions data and specific variables ( size of acres burned, fuel loading,
                                 and duration of fire ) must be provided for plume rise calculation and re-normalization of temporal profiles, as described
                                 in the file format documentation in <a href="ch08s02s08.html#sect_input_ptinv_fire" title="8.2.8.3.&nbsp;ORL FIRE Format">Section&nbsp;8.2.8.3, &#8220;ORL FIRE Format&#8221;</a> and <a href="ch08s02s06.html#sect_input_ptday_fireemis" title="8.2.6.2.&nbsp;ORL FIREEMIS Emission Format">Section&nbsp;8.2.6.2, &#8220;ORL FIREEMIS Emission Format&#8221;</a>.
                              </p>
                           </li>
                           <li>
                              <p>If using hourly stack exit temperature, velocity, or flow rates, the <code class="envar">PTHOUR</code> file should be created as described above for emissions data, but specific variable names must be provided, as described
                                 in the file format documentation in <a href="ch08s02s07.html" title="8.2.7.&nbsp;PTHOUR: Point source hour-specific emissions">Section&nbsp;8.2.7, &#8220;<code class="envar">PTHOUR</code>: Point source hour-specific emissions&#8221;</a>.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>Install inventory files in <code class="filename"><code class="envar">$PTDAT</code></code> directory.
                     </p>
                     <p>This directory is <code class="filename"><code class="envar">$SMKDAT</code>/inventory/<code class="envar">$INVID</code>/point</code></p>
                  </li>
                  <li>
                     <p>Ensure the Assigns file has the <code class="envar">PTHOUR</code> and <code class="envar">PTDAY</code> variables set to the <code class="envar">PTHOUR</code> and <code class="envar">PTDAY</code> file names for your inventory files.
                     </p>
                  </li>
                  <li>
                     <p>Ensure script settings will use the day-specific and hour-specific data.</p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>For day-specific data import and usage, set <code class="envar">DAY_SPECIFIC_YN</code> setting to Y.
                              </p>
                           </li>
                           <li>
                              <p>For hour-specific data import and usage, set <code class="envar">HOUR_SPECIFIC_YN</code> setting to Y. This applies to using either hourly emissions or hourly-precomputed plume rise.
                              </p>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>If using hourly data, make sure the <code class="envar">OUTZONE</code> setting is consistent with what will be used for other SMOKE processing steps.
                     </p>
                     <p>The example SMOKE scripts make it difficult to not use the same <code class="envar">OUTZONE</code> setting for all processing steps. Nevertheless, the user is responsible for ensuring that the same setting is used for all
                        SMOKE processing steps, including import of hourly inventories. The <code class="envar">OUTZONE</code> setting will affect the hourly inventory import because the hourly emissions will be adjusted by <span><strong class="command">Smkinven</strong></span> from the local time zones in the <code class="envar">PTHOUR</code> input files to the output time zone set by <code class="envar">OUTZONE</code> to create the <code class="envar">PHOUR</code> intermediate file.
                     </p>
                  </li>
                  <li>
                     <p>If using precomputed plume rise, ensure script settings will cause SMOKE to use the plume rise data.</p>
                     <div class="orderedlist">
                        <ol type="a">
                           <li>
                              <p>Set <code class="envar">HOUR_PLUMEDATA_YN</code> setting to Y.
                              </p>
                           </li>
                           <li>
                              <p>For UAM and CAM<sub>X</sub> modeling, set:
                              </p>
                              <div class="itemizedlist">
                                 <ul type="disc">
                                    <li>
                                       <p><code class="envar">RUN_LAYPOINT</code> setting to Y (this program is not usually needed for these models)
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="envar">EXPLICIT_PLUMES_YN</code> setting to Y
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ol>
                     </div>
                  </li>
                  <li>
                     <p>For fires emission modeling with internal plume rise calculation, SMOKE compute the plume rise data with internally computed
                        heat flux from fuel loading and burned area. See detail at <a href="ch04s04s17.html" title="4.4.17.&nbsp;Plume Rise Calculation for Fires">Section&nbsp;4.4.17, &#8220;Plume Rise Calculation for Fires&#8221;</a></p>
                  </li>
                  <li>
                     <p>If providing future-year hour-specific data, ensure that the dates used in the file are consistent with the <span class="emphasis"><em>base year</em></span> dates. The dates must match the dates of the meteorology data that will be used by the air quality model.
                     </p>
                  </li>
               </ol>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="sect_scripts_future_invs"></a>4.4.2.6.&nbsp;Future-year inventories
                     </h4>
                  </div>
               </div>
            </div>
            <p>For future-year modeling, you can choose to input future-year inventories to SMOKE. This is a different approach from importing
               a base-year inventory and using SMOKE growth to create a future-year inventory. The future-year inventory could be created
               outside of SMOKE and would need to be in one of the SMOKE input formats available for the source categories of interest.
            </p>
            <p>A future-year inventory could also be created by SMOKE, since the <span><strong class="command">Grwinven</strong></span> program can output emissions in ORL format. In this section, we do not cover importing base year inventories and using SMOKE
               to grow them to a future year; that topic is covered in <a href="ch04s04s11.html" title="4.4.11.&nbsp;Setup projection and control scenarios">Section&nbsp;4.4.11, &#8220;Setup projection and control scenarios&#8221;</a>. Following the instructions in that section, it is feasible to create a future-year inventory in SMOKE raw input format and
               use it as we describe in this section.
            </p>
            <div class="orderedlist">
               <ol type="1">
                  <li>
                     <p>Set the #YEAR setting in the inventory input files to the future inventory year.</p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">SMK_BASEYR_OVERRIDE</code> setting in the run script to the value of the base year.
                     </p>
                     <p>Ordinarily, this setting would simply be set to zero, which indicates that it is not to be used and the inventory year is
                        the same as the base year. In this case, the base year cannot be set by the inventory year, so this setting provides the actual
                        year to use. The base year is most often the same year as the year of meteorology data you are using to model your episode.
                        When this setting is defined by a script, <span><strong class="command">Smkinven</strong></span> will set the base year with that setting and set the future year as the year of the inventory data.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">YEAR</code> setting in the Assigns file to the base year.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">FYEAR</code> setting in the run scripts to the future year.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">SMK_FUTURE_YN</code> setting in the run scripts to Y.
                     </p>
                  </li>
               </ol>
            </div>
            <p>See <a href="ch04s02s04.html" title="4.2.4.&nbsp;Script settings">Section&nbsp;4.2.4, &#8220;Script settings&#8221;</a> for more information about how this setting affects the output directory structure and file names.
            </p>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="sect_scripts_pregridded"></a>4.4.2.7.&nbsp;Pre-gridded inventories
                     </h4>
                  </div>
               </div>
            </div>
            <div class="toc">
               <dl>
                  <dt><span class="section"><a href="ch04s04s02.html#sect_scripts_pregridded_invs_same">4.4.2.7.1. Pre-gridded inventories from the same modeling domain as an area source without source characterization or attributes</a></span></dt>
                  <dt><span class="section"><a href="ch04s04s02.html#sect_scripts_pregridded_invs_different">4.4.2.7.2. Pre-gridded inventories processing for converting between different modeling domains with source characterization
                           and attributes</a></span></dt>
               </dl>
            </div>
            <p>Smoke has two ways of processing the pregridded inventory data.  If the inventory data is in native netCDF format then see
               <a href="ch04s04s02.html#sect_scripts_pregridded_invs_same" title="4.4.2.7.1.&nbsp;Pre-gridded inventories from the same modeling domain as an area source without source characterization or attributes">Section&nbsp;4.4.2.7.1, &#8220;Pre-gridded inventories from the same modeling domain as an area source without source characterization
                  or attributes&#8221;</a>.  If the inventory is in IO-API/netCDF format then see <a href="ch04s04s02.html#sect_scripts_pregridded_invs_different" title="4.4.2.7.2.&nbsp;Pre-gridded inventories processing for converting between different modeling domains with source characterization and attributes">Section&nbsp;4.4.2.7.2, &#8220;Pre-gridded inventories processing for converting between different modeling domains with source characterization
                  and attributes&#8221;</a> 
            </p>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h5 class="title"><a name="sect_scripts_pregridded_invs_same"></a>4.4.2.7.1.&nbsp;Pre-gridded inventories from the same modeling domain as an area source without source characterization or attributes
                        </h5>
                     </div>
                  </div>
               </div>
               <p>SMOKE has a limited capability to import pre-gridded data from the same modeling domain. It can import the data if it is time-independent
                  and if the grid cell and pollutant names are the only attributes needed to identify the emissions. If SCC or other attributes
                  are available, SMOKE cannot use these directly; though in the case of SCCs, each SCC could conceivably be tediously input
                  as a separate dataset and modeled as a separate inventory.
               </p>
               <p>If any source category is available as pre-gridded data, the following steps must be taken.</p>
               <div class="orderedlist">
                  <ol type="1">
                     <li>
                        <p>Plan to import the data as an area source.</p>
                        <p>Only SMOKE area-source processing can use pre-gridded data, no matter that actual source category of origin for the data.
                           Essentially, once emissions data no longer has attributes such as SCCs, stack information for point sources, or country/state/county
                           codes, it all appears to be the same type of data to SMOKE and can be processed as an area source.
                        </p>
                        <p>This is not to say that all pre-gridded inventories can be processed correctly by SMOKE. For example, if a pre-gridded point
                           source inventory including stack identifiers and stack parameters were provided with grid cell numbers instead of lat/lon
                           coordinates, this could not be appropriately processed by SMOKE area processing as pre-gridded data.
                        </p>
                        <p>If any SMOKE processing steps such as chemical speciation or temporal allocation need to be done based on SCC, this is not
                           possible. Only a single default profile for speciation or temporal allocation can be applied to each pre-gridded inventory.
                        </p>
                     </li>
                     <li>
                        <p>Convert data to I/O API format.</p>
                        <p>Users must convert the pre-gridded data to I/O API format. The format is like the <code class="envar">AG</code> file that can be output from <span><strong class="command">Smkmerge</strong></span>. This format has each pollutant stored as a variable and is time independent. Some sort of ASCII-to-I/O API converter must
                           be created and used to perform this step. At this time, there is no general-purpose tool to make such a conversion released
                           with the SMOKE system.
                        </p>
                     </li>
                     <li>
                        <p>Set the <code class="envar">IMPORT_GRDIOAPI_YN</code> setting to Y.
                        </p>
                        <p>This setting will cause <span><strong class="command">Smkinven</strong></span> to expect the I/O API gridded input and will request the <code class="envar">AG</code> logical file name instead of the <code class="envar">ARINV</code> file.
                        </p>
                     </li>
                     <li>
                        <p>Ensure that the <code class="envar">AG</code> logical file name is set by the Assigns file or by the run script.
                        </p>
                        <p>This logical file name must be set to the I/O API-formatted pre-gridded inventory file.</p>
                     </li>
                  </ol>
               </div>
            </div>
            <div class="section" lang="en">
               <div class="titlepage">
                  <div>
                     <div>
                        <h5 class="title"><a name="sect_scripts_pregridded_invs_different"></a>4.4.2.7.2.&nbsp;Pre-gridded inventories processing for converting between different modeling domains with source characterization
                           and attributes
                        </h5>
                     </div>
                  </div>
               </div>
               <p>SMOKE will regrid the data from the native NetCDF-formatted pregridded inventory data (e.g. lat-lon for global inventories)
                  to the CMAQ modeling grid, and apply a unique source ID to each grid cell to allow SMOKE to perform chemical speciation, temporal
                  allocation from annual to hourly timesteps, and elevated source selection and vertical allocation. The pre-gridded inventory
                  files each contain data for a different sector, the sector and pollutant contained in each pre-gridded inventory file is specified
                  in the ARINV file using the #LIST GRID format.
               </p>
               <p>To process pre-gridded data from different modeling domains, the following steps must be taken.</p>
               <div class="orderedlist">
                  <ol type="1">
                     <li>
                        <p> Set the <code class="envar">IMPORT_GRDNETCDF_YN</code> to Y to read the native netCDF annual inventory files.
                        </p>
                     </li>
                     <li>
                        <p>Grdmat is used to convert the data from the input data grid (e.g. lat-lon for EDGAR/RCP/HTAP) to the output modeling grid.
                           Set the <code class="envar">IOAPI_GRIDNAME_1</code> to specify the output grid.
                        </p>
                     </li>
                     <li>
                        <p>SMOKE reads each grid cell in the gridded inventory file as a unique source that will have a unique source ID.  The lower
                           left corner of inventory grid will be source 1, cell (2,1) will be source 2, cell (3,1) source 3, etc
                        </p>
                     </li>
                     <li>
                        <p> For each gridded inventory file, a Geographical Code Mask Input file (GRIDMASK) is provided by UNC for EDGAR inventory files
                           that assigns a GEOGRID_LEVEL2 value to each grid cell.
                        </p>
                     </li>
                     <li>
                        <p> The ARINV file is used to read in a list of gridded inventory files and to specify the SCC associated with each gridded inventory
                           file
                        </p>
                     </li>
                     <li>
                        <p> Set the <code class="envar">NETCDF_POL_UNIT</code> to kg m-2 -s
                        </p>
                     </li>
                     <li>
                        <p> Set the <code class="envar">NETCDF_INV_YEAR</code> to the year of the inventory (e.g. 2010)
                        </p>
                     </li>
                     <li>
                        <p> To apply control factors to adjust emissions by GEOCODE_LEVEL and SCC use the CONTROL packet in the GCNTL file </p>
                     </li>
                     <li>
                        <p> To apply vertical profiles to gridded inventory data using the SMOKE Utility Program Layalloc. The EDGAR inventory includes
                           fixed vertical profiles by sector that define the percentages of emissions by altitude band. Layalloc will create 3-d output
                           files for the gridded emissions sectors that emit above the surface layer (e.g. energy and industrial sources).  
                        </p>
                     </li>
                  </ol>
               </div>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="sect_scripts_all_invs"></a>4.4.2.8.&nbsp;Files and settings for all inventories
                     </h4>
                  </div>
               </div>
            </div>
            <p>For importing all inventories, the following steps should be taken to review settings and change them as appropriate for your
               specific modeling case.
            </p>
            <p>Assigns file settings:</p>
            <div class="orderedlist">
               <ol type="1">
                  <li>
                     <p>Change the Assigns files inventory settings.</p>
                     <p>Following the settings in <a href="ch04s04.html#sect_scripts_change_assigns" title="4.4.1.&nbsp;Change Assigns file to set scenario names, grid names, and other case-specific configuration information">Section&nbsp;4.4.1, &#8220;Change Assigns file to set scenario names, grid names, and other case-specific configuration information&#8221;</a>, you should have created a new Assigns file for your case and set the <code class="envar">INVID</code>, <code class="envar">INVEN</code>, and <code class="envar">INVOP</code> settings described in <a href="ch04s04.html#tbl_scripts_variables_files" title="Table&nbsp;4.1.&nbsp;Variable in Assigns file for naming files and directories">Table&nbsp;4.1, &#8220;Variable in Assigns file for naming files and directories&#8221;</a>. Since the inventory input directories depend on the <code class="envar">INVID</code> setting, you should make sure that the value set for <code class="envar">INVID</code> is consistent with the location of the inventory files. For example, the <code class="envar">ARINV</code> files should be installed in <code class="filename"><code class="envar">$SMKDAT</code>/inventory/<code class="envar">$INVID</code>/area</code>. Make sure that <code class="envar">$INVID</code> label in the paths for the files installed in prior subsections is the same as the <code class="envar">$INVID</code> label in the Assigns file that is included in the Assigns file you will use.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">ABASE</code>, <code class="envar">MBASE</code>, <code class="envar">PBASE</code>, and <code class="envar">EBASE</code> settings described in <a href="ch04s04.html#tbl_scripts_variables_files" title="Table&nbsp;4.1.&nbsp;Variable in Assigns file for naming files and directories">Table&nbsp;4.1, &#8220;Variable in Assigns file for naming files and directories&#8221;</a>. This is usually done for a new inventory, and can also be done for new scenarios with an existing inventory.
                     </p>
                  </li>
               </ol>
            </div>
            <p>Script settings:</p>
            <div class="orderedlist">
               <ol start="3" type="1">
                  <li>
                     <p>Double check that the correct Assigns file (e.g., the one with the correct <code class="envar">$INVID</code> setting) is used by the run scripts for your case.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">RAW_DUP_CHECK</code> setting to Y if you want <span><strong class="command">Smkinven</strong></span> to give an error if any duplicate entries are found in the inventory. See <a href="ch06s13.html" title="6.13.&nbsp;Smkinven">Section&nbsp;6.13, &#8220;<span><strong class="command">Smkinven</strong></span>&#8221;</a> for more information.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">SMKINVEN_FORMULA</code> setting to compute one or more pollutant values from teh values of other pollutants.
                     </p>
                     <p>This is most commonly used to compute coarse particulates (PMC) from PM<sub>10</sub> and PM<sub>2.5</sub> using the setting &#8220;<span class="quote">PMC = PM10 - PM2_5</span>&#8221;.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">WEST_HSPHERE</code> setting to reset any positive longitude values that are intended for the Western hemisphere to a negative value.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">WKDAY_NORMALIZE</code> setting to account for the desired weekday normalization approach to be used for hourly emissions. See <a href="ch06s13.html" title="6.13.&nbsp;Smkinven">Section&nbsp;6.13, &#8220;<span><strong class="command">Smkinven</strong></span>&#8221;</a> for more information.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">SMK_PROCESS_HAPS</code> to read the <code class="envar">NHAPEXCLUDE</code> file.
                     </p>
                     <p>This setting is only relevant when importing both criteria and toxic inventories. In this case, if there are VOCs in both
                        inventories and the <code class="envar">INVTABLE</code> has indicate which toxics are VOCs, <span><strong class="command">Smkinven</strong></span> will attempt to integrate VOC emissions for all sources from the criteria and toxics inventories. The <code class="envar">NHAPEXCLUDE</code> file provides a list of SCCs for which <span><strong class="command">Smkinven</strong></span> should not integrate the inventories and should instead drop the toxic VOC emissions to prevent double counting. Toxic emissions
                        of explicit model species are never dropped, however. More information is available in <a href="ch02s09s05.html" title="2.9.5.&nbsp;Combine toxics and criteria inventories">Section&nbsp;2.9.5, &#8220;Combine toxics and criteria inventories&#8221;</a>.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">SMK_ARTOPNT_YN</code> setting to Y when <span><strong class="command">Smkinven</strong></span> should use the <code class="envar">ARTOPNT</code> file to assign point source locations to area-source emissions.
                     </p>
                  </li>
                  <li>
                     <p>Set the <code class="envar">FILL_ANNUAL</code> setting to Y to fill annual emissions values with average-day values, when average-day values are available but annual values
                        are not.
                     </p>
                     <p>See <a href="ch04s04s02.html#sect_scripts_average_day_invs" title="4.4.2.9.&nbsp;Using average-day and annual data in the same run">Section&nbsp;4.4.2.9, &#8220;Using average-day and annual data in the same run&#8221;</a> for more information on why one might want to use this option.
                     </p>
                  </li>
               </ol>
            </div>
         </div>
         <div class="section" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="sect_scripts_average_day_invs"></a>4.4.2.9.&nbsp;Using average-day and annual data in the same run
                     </h4>
                  </div>
               </div>
            </div>
            <p>The ORL and FF10 formats provide fields for both annual and average-day emissions values. SMOKE will import both values when
               either of these formats are used and store all emissions in the SMOKE intermediate inventory files. To configure the <span><strong class="command">Temporal</strong></span> allocation step, you have the option of using the <code class="envar">SMK_AVEDAY_YN</code> setting to select using either the annual or average-day data when both are available. This option and its typical usage
               will be explained with the <span><strong class="command">Temporal</strong></span> settings.
            </p>
            <p>This section describes what to do when both annual data and average-day data need to be used in the same SMOKE run. This can
               occur when part of an inventory has been provided using annual inventories only (the average-day values are missing or incorrect)
               and a different part with average-day inventories only (the annual values are missing). This is only a problem when you want
               to run all of the sources in a single run; so, if nonroad and stationary area sources are provided with the two different
               temporal resolutions, these can just be run with separate SMOKE runs. If two parts of the stationary area source inventory
               are provided with two different temporal resolutions, then this section can help to setup the modeling correctly.
            </p>
            <p>Two approaches are available in SMOKE to resolve this situation. In the first approach, one can set SMOKE to run using the
               average-day data, and in the second approach, set to use the annual data. These lists describe these two approaches:
            </p>
            <p>Run all sources using &#8220;<span class="quote">annual</span>&#8221; data
            </p>
            <div class="orderedlist">
               <ol type="1">
                  <li>
                     <p>Set the <code class="envar">FILL_ANNUAL</code> setting to Y. This will cause the missing annual data to be filled in with the available average-day data by multiplying
                        the number of days in the year, accounting for leap years.
                     </p>
                  </li>
                  <li>
                     <p>Ensure that the monthly temporal profile assignments made by the <code class="envar">ATREF</code>, <code class="envar">MTREF</code>, or <code class="envar">PTREF</code> files assign uniform monthly profiles to any all sources that have the annual numbers filled in with seasonal values.
                     </p>
                  </li>
                  <li>
                     <p>During temporal processing, set <code class="envar">SMK_AVEDAY_YN</code> to N. This will ensure that both the annual values that were available in the inventory and the annual values that were computed
                        will be used by the <span><strong class="command">Temporal</strong></span> program. Since the monthly temporal profiles for the filled-in annual emissions have been set to uniform, the average-day
                        values will be calculated from the filled-in annual values.
                     </p>
                  </li>
               </ol>
            </div>
            <p>Run all sources using average-day data</p>
            <div class="orderedlist">
               <ol type="1">
                  <li>
                     <p>Set the <code class="envar">FILL_ANNUAL</code> setting to N. By default, <span><strong class="command">Smkinven</strong></span> computes an average-day value when none is provided by dividing the annual value by the number of days in the year, accounting
                        for leap years.
                     </p>
                  </li>
                  <li>
                     <p>During temporal processing, set <code class="envar">SMK_AVEDAY_YN</code> to Y. This will ensure that both the average-day values that were available in the inventory and the average-day values that
                        were computed will be used by the <span><strong class="command">Temporal</strong></span> program.
                     </p>
                  </li>
                  <li>
                     <p>Note that no monthly profiles are applied to average-day emissions, so if monthly variation is needed, it will need to be
                        calculated outside of SMOKE. In this case, it might be easier to run all sources as annual, as described above.
                     </p>
                  </li>
               </ol>
            </div>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="ch04s04.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="ch04s04.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="ch04s04s03.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">4.4.&nbsp;How to use SMOKE&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;4.4.3.&nbsp;Select which pollutants in the inventory are kept</td>
            </tr>
         </table>
      </div>
   </body>
</html>